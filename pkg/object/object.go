package object

import (
	"WowjoyProject/DataSharePlatForm/global"
	"WowjoyProject/DataSharePlatForm/internal/model"
	"WowjoyProject/DataSharePlatForm/pkg/general"
	"io/ioutil"
	"net/http"
	"os"
	"os/exec"
	"strings"

	"github.com/beevik/etree"
	uuid "github.com/satori/go.uuid"
)

// 认证获取的数据
// 1.注册患者基本信息
// 2.生成标准的检查报告CDA文档
// 3.按照Dicom标准要求生成影像清单KOS（Key Object Selection）文档。
// 4.需要报告PDF文档
// 5.将检查报告信息中的关键数据进行CA签名(省里的标准，杭州市没有买CA暂时不实现)
// 6.将文件base64编码
// 7.将生成的检查报告CDA文档和影像清单KOS文档注册至省影像云平台存储库服务，在省影像云平台中存储注册的文档并形成检查/影像主索引。
func Work(obj global.ObjectData) {
	// 将认证的数据插入数据库
	model.InsertData(obj.Uid_Enc, obj.Report_update_time)
	// 获取患者基本信息
	baseInfo := model.GetBasicInfo(obj.Uid_Enc, obj.Report_update_time)
	global.Logger.Debug("***患者基本信息***", baseInfo)
	// 1.注册患者基本信息
	global.Logger.Info("***1.注册患者基本信息***")
	if !RegisterBasicInfo(baseInfo) {
		// 注册失败 补偿操作
		// if !ReDo(obj) {
		//补偿操作失败 更新platform_share_info status = 1
		global.Logger.Error("***注册患者基本信息失败***")
		model.UpdateStatus(obj.Uid_Enc, 1)
		return
		//}
	}
	// 2.生成标准的检查报告CDA文档
	// 获取报告信息
	reportInfo := model.GetReportInfo(obj.Uid_Enc)
	gendercode := ""
	gendername := ""
	switch baseInfo.Gender {
	case "M":
		gendercode = "1"
		gendername = "男性"
	case "F":
		gendercode = "2"
		gendername = "女性"
	default:
		gendercode = "0"
		gendername = "未知"
	}
	reportInfo.GenderCode = gendercode
	reportInfo.GenderName = gendername
	global.Logger.Debug("***患者报告信息***", reportInfo)
	CADInfo := global.CDAInfo{
		BPInfo: baseInfo,
		RInfo:  reportInfo,
	}
	cadfile := "./storage/xml/" + obj.Uid_Enc + ".xml"
	if CreateCDAFile(cadfile, CADInfo) != nil {
		global.Logger.Error("***创建CDA文件失败***")
		model.UpdateStatus(obj.Uid_Enc, 1)
		os.Remove(cadfile)
		return
	}
	global.Logger.Info("***创建CDA文件成功***", cadfile)
	// 3.生成KOS文档
	// 获取影像路径
	imagepath := model.GetImagePath(obj.Uid_Enc)
	// 影像路径处理：截取和去重
	imagepath = general.RemoveDuplicate(imagepath)
	if len(imagepath) == 0 {
		global.Logger.Info("***没找到影像路径,流程退出***")
		return
	}
	global.Logger.Info(imagepath)
	kosfile := imagepath[0] + "\\doc001.kos"
	if CreateKOSFile(imagepath, kosfile) != nil {
		model.UpdateStatus(obj.Uid_Enc, 1)
		os.Remove(cadfile)
		return
	}
	// 判断文件是否存在
	if !general.Exist(kosfile) {
		global.Logger.Error("***KOS文件没找到,流程退出***")
		os.Remove(cadfile)
		model.UpdateStatus(obj.Uid_Enc, 1)
		return
	}
	// 拷贝KOS文档
	destkos := "./storage/kos/" + obj.Uid_Enc + ".kos"
	_, err := general.CopyFile(kosfile, destkos)
	if err == nil {
		os.Remove(kosfile)
	}
	global.Logger.Info("***创建KOS文件成功***", destkos)

	// 4.获取PDF文件路径
	pdffile := model.GetPDFFilePath(obj.Uid_Enc)
	global.Logger.Info("***PDF文件路径***", pdffile)
	// 文件Base64编码
	baseCDA := general.File2Base64(cadfile)
	baseKOS := general.File2Base64(destkos)
	basePDF := general.File2Base64(pdffile)
	// 7.注册检查信息/影像清单
	// cdafilleid := uuid.NewV4()
	// kosfilleid := uuid.NewV4()
	// pdffilleid := uuid.NewV4()

	DocInfo := global.DocInfo{
		Object:    obj,
		CDA:       CADInfo,
		CDAFileID: uuid.NewV4().String(),
		CDAData:   baseCDA,
		KOSFileID: uuid.NewV4().String(),
		KOSData:   baseKOS,
		PDFFileID: uuid.NewV4().String(),
		PDFData:   basePDF,
	}
	global.Logger.Info(DocInfo)
	if RegisterDocInfo(DocInfo) {
		// 注册成功，更新platform_share_info status = 0
		model.UpdateStatus(obj.Uid_Enc, 0)
		// 跟新文档id
		model.UpdateFileUid(obj.Uid_Enc, DocInfo.CDAFileID, DocInfo.PDFFileID, DocInfo.KOSFileID)
	} else {
		model.UpdateStatus(obj.Uid_Enc, 1)
	}
	os.Remove(cadfile)
	os.Remove(destkos)
}

// 1.注册患者基本信息
// 注册成功 返回true
// 注册失败 返回false
func RegisterBasicInfo(obj global.BasicPatientInfo) bool {
	global.Logger.Debug("***生成注册患者信息样包***")
	typeCode := ""
	reqBody, _ := WritePatientRegistryAddXML(obj)
	soapResult := CallSoap12(global.ObjectSetting.Object_PIX, reqBody)
	doc := etree.NewDocument()
	if err := doc.ReadFromString(soapResult); err != nil {
		global.Logger.Error(err)
		return false
	}
	Result := doc.FindElement("./s:Envelope/s:Body/MCCI_IN000002UV01/acknowledgement/typeCode").Attr
	if Result[0].Key == "code" {
		typeCode = Result[0].Value
	}
	switch typeCode {
	case "CE":
		global.Logger.Info("注册患者基本信息失败：", typeCode)
		return false
	case "CA":
		global.Logger.Info("注册患者基本信息成功：", typeCode)
		return true
	default:
		global.Logger.Info("注册患者基本信息失败：", typeCode)
	}
	return false
}

// 2.创建CDA报告文档
func CreateCDAFile(file string, obj global.CDAInfo) error {
	global.Logger.Debug("***生成CDA信息样包***")
	return WriteReportCDAXML(file, obj)
}

// 3.创建KOS文档
func CreateKOSFile(imagepath []string, kosfile string) error {
	exepath := "./storage/makeKOS/makeKOS.exe"
	// 调用生成KOS文件程序，生成KOS文件
	cmd := exec.Command(exepath, imagepath...)
	if err := cmd.Run(); err != nil {
		global.Logger.Error("***KOS文件生成失败***")
		return err
	}
	global.Logger.Debug("***KOS文件生成***")
	return nil
}

// 7.注册文档
func RegisterDocInfo(obj global.DocInfo) bool {
	reqBody, _ := WriteProvideAndRegisterDocumentSetXML(obj)
	soapResult := CallSoap12(global.ObjectSetting.Object_CentralizedStorage, reqBody)
	global.Logger.Info("注册文档返回包...", soapResult)
	if strings.Contains(soapResult, "Success") {
		global.Logger.Info("***注册文档成功***")
		return true
	}
	global.Logger.Info("***注册文档失败***")
	return false
}

// 补偿操作
func ReDo(obj global.ObjectData) bool {
	global.Logger.Info("开始补偿操作：", obj.Uid_Enc)
	if obj.Count < global.ObjectSetting.Object_Count {
		obj.Count += 1
		data := global.ObjectData{
			Uid_Enc:            obj.Uid_Enc,
			Report_update_time: obj.Report_update_time,
			Count:              obj.Count,
		}
		global.ObjectDataChan <- data
		return true
	}
	return false
}

// 调用通信SOAP1.2
func CallSoap12(url, reqBody string) string {

	res, err := http.Post(url, "application/soap+xml; charset=utf-8", strings.NewReader(reqBody))
	if nil != err {
		global.Logger.Error("http post err:", err)
		return ""
	}
	defer res.Body.Close()
	// return status
	if http.StatusOK != res.StatusCode {
		global.Logger.Debug("WebService soap1.2 request fail, status: ", res.StatusCode)
		global.Logger.Debug("res.Body: ", res.Body)
		return ""
	}
	data, err := ioutil.ReadAll(res.Body)
	if nil != err {
		global.Logger.Error("ioutil ReadAll err:", err)
		return ""
	}
	return string(data)
}

// 注册患者基本信息(患者新增)
func WritePatientRegistryAddXML(obj global.BasicPatientInfo) (reqbody string, err error) {
	doc := etree.NewDocument()
	// doc.CreateProcInst("xml", `version="1.0" encoding="UTF-8"`)
	// doc.CreateProcInst("xml-stylesheet", `type="text/xsl" href="style.xsl"`)
	s_Envelope := doc.CreateElement("s:Envelope")
	s_Envelope.CreateAttr("xmlns:a", "http://www.w3.org/2005/08/addressing")
	s_Envelope.CreateAttr("xmlns:s", "http://www.w3.org/2003/05/soap-envelope")
	s_Header := s_Envelope.CreateElement("s:Header")
	a_Action := s_Header.CreateElement("a:Action")
	a_Action.CreateAttr("s:mustUnderstand", "1")
	a_Action.SetText("urn:hl7-org:v3:PRPA_IN201301UV02")
	a_MessageID := s_Header.CreateElement("a:MessageID")
	a_MessageID.SetText("urn:uuid:f011adc6-7e53-4208-a963-9c224275ca37")
	a_ReplyTo := s_Header.CreateElement("a:ReplyTo")
	a_Address := a_ReplyTo.CreateElement("a:Address")
	a_Address.SetText("http://www.w3.org/2005/08/addressing/anonymous")
	a_To := s_Header.CreateElement("a:To")
	a_To.CreateAttr("s:mustUnderstand", "1")
	a_To.SetText("http://localhost:8083/PixService.svc")
	s_Body := s_Envelope.CreateElement("s:Body")
	s_Body.CreateAttr("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance")
	s_Body.CreateAttr("xmlns:xsd", "http://www.w3.org/2001/XMLSchema")
	PRPA_IN201301UV02 := s_Body.CreateElement("PRPA_IN201301UV02")
	PRPA_IN201301UV02.CreateAttr("ITSVersion", "XML_1.0")
	PRPA_IN201301UV02.CreateAttr("xmlns", "urn:hl7-org:v3")
	PRPA_IN201301UV02_id := PRPA_IN201301UV02.CreateElement("id")
	PRPA_IN201301UV02_id.CreateAttr("root", "96a59eca-9f25-4a75-a69b-483aabaa0636")
	PRPA_IN201301UV02_creationTime := PRPA_IN201301UV02.CreateElement("creationTime")
	PRPA_IN201301UV02_creationTime.CreateAttr("value", obj.CreationTime)
	PRPA_IN201301UV02_interactionId := PRPA_IN201301UV02.CreateElement("interactionId")
	PRPA_IN201301UV02_interactionId.CreateAttr("root", "2.16.840.1.113883.1.6")
	PRPA_IN201301UV02_interactionId.CreateAttr("extension", "PRPA_IN201301UV02")
	PRPA_IN201301UV02_processingCode := PRPA_IN201301UV02.CreateElement("processingCode")
	PRPA_IN201301UV02_processingCode.CreateAttr("code", "P")
	PRPA_IN201301UV02_processingModeCode := PRPA_IN201301UV02.CreateElement("processingModeCode")
	PRPA_IN201301UV02_processingModeCode.CreateAttr("code", "T")
	PRPA_IN201301UV02_acceptAckCode := PRPA_IN201301UV02.CreateElement("acceptAckCode")
	PRPA_IN201301UV02_acceptAckCode.CreateAttr("code", "AL")
	PRPA_IN201301UV02_receiver := PRPA_IN201301UV02.CreateElement("receiver")
	PRPA_IN201301UV02_receiver.CreateAttr("typeCode", "RCV")
	PRPA_IN201301UV02_receiver_device := PRPA_IN201301UV02_receiver.CreateElement("device")
	PRPA_IN201301UV02_receiver_device.CreateAttr("classCode", "DEV")
	PRPA_IN201301UV02_receiver_device.CreateAttr("determinerCode", "INSTANCE")
	PRPA_IN201301UV02_receiver_device_id := PRPA_IN201301UV02_receiver_device.CreateElement("id")
	PRPA_IN201301UV02_receiver_device_id.CreateAttr("root", "1.2.840.114350.1.13.99999.4567")
	PRPA_IN201301UV02_sender := PRPA_IN201301UV02.CreateElement("sender")
	PRPA_IN201301UV02_sender.CreateAttr("typeCode", "SND")
	PRPA_IN201301UV02_sender_device := PRPA_IN201301UV02_sender.CreateElement("device")
	PRPA_IN201301UV02_sender_device.CreateAttr("classCode", "DEV")
	PRPA_IN201301UV02_sender_device.CreateAttr("determinerCode", "INSTANCE")
	PRPA_IN201301UV02_sender_device_id := PRPA_IN201301UV02_sender_device.CreateElement("id")
	PRPA_IN201301UV02_sender_device_id.CreateAttr("root", "1.2.840.114350.1.13.99999.4568")
	PRPA_IN201301UV02_controlActProcess := PRPA_IN201301UV02.CreateElement("controlActProcess")
	PRPA_IN201301UV02_controlActProcess.CreateAttr("classCode", "CACT")
	PRPA_IN201301UV02_controlActProcess.CreateAttr("moodCode", "EVN")
	PRPA_IN201301UV02_controlActProcess_subject := PRPA_IN201301UV02_controlActProcess.CreateElement("subject")
	PRPA_IN201301UV02_controlActProcess_subject.CreateAttr("typeCode", "SUBJ")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent := PRPA_IN201301UV02_controlActProcess_subject.CreateElement("registrationEvent")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent.CreateAttr("classCode", "REG")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent.CreateAttr("moodCode", "EVN")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_id := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent.CreateElement("id")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_id.CreateAttr("nullFlavor", "NA")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_statusCode := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent.CreateElement("statusCode")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_statusCode.CreateAttr("code", "active")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1 := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent.CreateElement("subject1")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1.CreateAttr("typeCode", "SBJ")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1.CreateElement("patient")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient.CreateAttr("classCode", "PAT")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_id := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient.CreateElement("id")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_id.CreateAttr("root", obj.InteractionId)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_id.CreateAttr("extension", obj.PatientID)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_statusCode := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient.CreateElement("statusCode")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_statusCode.CreateAttr("code", "active")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient.CreateElement("patientPerson")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateAttr("classCode", "PSN")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateAttr("determinerCode", "INSTANCE")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_name := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateElement("name")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_name_given := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_name.CreateElement("given")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_name_given.SetText(obj.Name)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_name_family := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_name.CreateElement("family")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_name_family.SetText(obj.NamePY)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_telecom := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateElement("telecom")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_telecom.CreateAttr("value", obj.Telecom)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_telecom.CreateAttr("use", "HP")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_administrativeGenderCode := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateElement("administrativeGenderCode")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_administrativeGenderCode.CreateAttr("code", obj.Gender)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_birthTime := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateElement("birthTime")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_birthTime.CreateAttr("value", obj.BirthTime)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_addr := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateElement("addr")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_addr_streetAddressLine := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_addr.CreateElement("streetAddressLine")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_addr_streetAddressLine.SetText(obj.StreetAddressLine)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateElement("asOtherIDs")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs.CreateAttr("classCode", "PAT")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_id := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs.CreateElement("id")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_id.CreateAttr("root", "2.16.840.1.113883.4.1")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_id.CreateAttr("extension", obj.IDNumber)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_scopingOrganization := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs.CreateElement("scopingOrganization")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_scopingOrganization.CreateAttr("classCode", "ORG")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_scopingOrganization.CreateAttr("determinerCode", "INSTANCE")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_scopingOrganization_id := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_scopingOrganization.CreateElement("id")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_asOtherIDs_scopingOrganization_id.CreateAttr("root", "2.16.840.1.113883.4.1")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_birthPlace := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson.CreateElement("birthPlace")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_patientPerson_birthPlace.CreateAttr("xsi:nil", "true")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient.CreateElement("providerOrganization")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization.CreateAttr("classCode", "ORG")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization.CreateAttr("determinerCode", "INSTANCE")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_id := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization.CreateElement("id")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_id.CreateAttr("root", obj.OrganizationCode)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_name := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization.CreateElement("name")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_name.SetText(obj.OrganizationName)
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_contactParty := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization.CreateElement("contactParty")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_contactParty.CreateAttr("classCode", "CON")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_contactParty_telecom := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_contactParty.CreateElement("telecom")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_subject1_patient_providerOrganization_contactParty_telecom.CreateAttr("value", "")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_custodian := PRPA_IN201301UV02_controlActProcess_subject_registrationEvent.CreateElement("custodian")
	PRPA_IN201301UV02_controlActProcess_subject_registrationEvent_custodian.CreateAttr("xsi:nil", "true")
	// xml 缩进q
	doc.Indent(4)
	// doc.WriteTo(os.Stdout)
	// doc.WriteToFile("./storage/xml/PatientRegistryAdd.xml")
	//return doc.WriteToBytes()
	return doc.WriteToString()
}

// 报告CDA信息
func WriteReportCDAXML(xmlfile string, cda global.CDAInfo) error {
	doc := etree.NewDocument()
	doc.CreateProcInst("xml", `version="1.0" encoding="utf-8"`)
	// doc.CreateProcInst("xml-stylesheet", `type="text/xsl" href="style.xsl"`)
	ClinicalDocument := doc.CreateElement("ClinicalDocument")
	ClinicalDocument.CreateAttr("xmlns", "urn:h17-org:v3")
	ClinicalDocument.CreateAttr("xmlns:mif", "urn:h17-org:v3/mif")
	ClinicalDocument.CreateAttr("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-nstance")
	ClinicalDocument.CreateAttr("xsi:schemaLocation", "urn:h17-org:v3..\\sdschemas\\SDA.xsd")
	ClinicalDocument_realmCode := ClinicalDocument.CreateElement("realmCode")
	ClinicalDocument_realmCode.CreateAttr("code", "CN")
	ClinicalDocument_typeId := ClinicalDocument.CreateElement("typeId")
	ClinicalDocument_typeId.CreateAttr("root", "2.16.840.1.113883.1.3")
	ClinicalDocument_typeId.CreateAttr("extension", "POCD_MT000040")
	ClinicalDocument_templateId := ClinicalDocument.CreateElement("templateId")
	ClinicalDocument_templateId.CreateAttr("root", "2.16.156.10011.2.1.1.26")
	ClinicalDocument_id := ClinicalDocument.CreateElement("id")
	ClinicalDocument_id.CreateAttr("root", "2.16.156.10011.1.1")
	ClinicalDocument_id.CreateAttr("extension", cda.RInfo.StudyInstanceUid)
	ClinicalDocument_code := ClinicalDocument.CreateElement("code")
	ClinicalDocument_code.CreateAttr("code", "C0006")
	ClinicalDocument_code.CreateAttr("codeSystem", "2.16.156.10011.2.4")
	ClinicalDocument_code.CreateAttr("codeSystemName", "卫生信息共享文档编码体系")
	ClinicalDocument_Title := ClinicalDocument.CreateElement("Title")
	ClinicalDocument_Title.SetText("检查报告")
	ClinicalDocument_effectiveTime := ClinicalDocument.CreateElement("effectiveTime")
	ClinicalDocument_effectiveTime.CreateAttr("value", cda.RInfo.AuditTime)
	ClinicalDocument_confidentialityCode := ClinicalDocument.CreateElement("confidentialityCode")
	ClinicalDocument_confidentialityCode.CreateAttr("code", "N")
	ClinicalDocument_confidentialityCode.CreateAttr("codeSystem", "2.16.840.1.113883.5.25")
	ClinicalDocument_confidentialityCode.CreateAttr("codeSystemName", "Confidentiality")
	ClinicalDocument_confidentialityCode.CreateAttr("displayName", "保密级别代码表")
	ClinicalDocument_languageCode := ClinicalDocument.CreateElement("languageCode")
	ClinicalDocument_languageCode.CreateAttr("code", "zh-CN")
	ClinicalDocument.CreateElement("setId")
	ClinicalDocument.CreateElement("versionNumber")
	ClinicalDocument_recordTarget := ClinicalDocument.CreateElement("recordTarget")
	ClinicalDocument_recordTarget.CreateAttr("typeCode", "RCT")
	ClinicalDocument_recordTarget.CreateAttr("contextControlCode", "OP")
	ClinicalDocument_recordTarget_patientRole := ClinicalDocument_recordTarget.CreateElement("patientRole")
	ClinicalDocument_recordTarget_patientRole.CreateAttr("classCode", "PAT")
	ClinicalDocument_recordTarget_patientRole_id1 := ClinicalDocument_recordTarget_patientRole.CreateElement("id")
	ClinicalDocument_recordTarget_patientRole_id1.CreateAttr("root", "2.16.156.10011.1.11")
	ClinicalDocument_recordTarget_patientRole_id1.CreateAttr("extension", cda.RInfo.Clinic_Id)
	ClinicalDocument_recordTarget_patientRole_id2 := ClinicalDocument_recordTarget_patientRole.CreateElement("id")
	ClinicalDocument_recordTarget_patientRole_id2.CreateAttr("root", "2.16.156.10011.1.12")
	ClinicalDocument_recordTarget_patientRole_id2.CreateAttr("extension", cda.RInfo.Clinic_Id)
	ClinicalDocument_recordTarget_patientRole_id3 := ClinicalDocument_recordTarget_patientRole.CreateElement("id")
	ClinicalDocument_recordTarget_patientRole_id3.CreateAttr("root", "2.16.156.10011.1.32")
	ClinicalDocument_recordTarget_patientRole_id3.CreateAttr("extension", cda.RInfo.AccessionNumber)
	ClinicalDocument_recordTarget_patientRole_id4 := ClinicalDocument_recordTarget_patientRole.CreateElement("id")
	ClinicalDocument_recordTarget_patientRole_id4.CreateAttr("root", "2.16.156.10011.1.24")
	ClinicalDocument_recordTarget_patientRole_id4.CreateAttr("extension", cda.RInfo.HisSn)
	ClinicalDocument_recordTarget_patientRole_patientType := ClinicalDocument_recordTarget_patientRole.CreateElement("patientType")
	ClinicalDocument_recordTarget_patientRole_patientType_patienttypeCode := ClinicalDocument_recordTarget_patientRole_patientType.CreateElement("patienttypeCode")
	ClinicalDocument_recordTarget_patientRole_patientType_patienttypeCode.CreateAttr("code", cda.RInfo.PatientTypeCode)
	ClinicalDocument_recordTarget_patientRole_patientType_patienttypeCode.CreateAttr("codeSystem", "2.16.156.10011.2.3.1.271")
	ClinicalDocument_recordTarget_patientRole_patientType_patienttypeCode.CreateAttr("codeSystemName", "患者类型代码表")
	ClinicalDocument_recordTarget_patientRole_patientType_patienttypeCode.CreateAttr("displayName", cda.RInfo.PatientTypeName)
	ClinicalDocument_recordTarget_patientRole_telecom := ClinicalDocument_recordTarget_patientRole.CreateElement("telecom")
	ClinicalDocument_recordTarget_patientRole_telecom.CreateAttr("value", cda.BPInfo.Telecom)
	ClinicalDocument_recordTarget_patientRole_patient := ClinicalDocument_recordTarget_patientRole.CreateElement("patient")
	ClinicalDocument_recordTarget_patientRole_patient.CreateAttr("classCode", "PSN")
	ClinicalDocument_recordTarget_patientRole_patient.CreateAttr("determinerCode", "INSTANCE")
	ClinicalDocument_recordTarget_patientRole_patient_id := ClinicalDocument_recordTarget_patientRole_patient.CreateElement("id")
	ClinicalDocument_recordTarget_patientRole_patient_id.CreateAttr("root", "2.16.156.10011.1.3")
	ClinicalDocument_recordTarget_patientRole_patient_id.CreateAttr("extension", cda.BPInfo.IDNumber)
	ClinicalDocument_recordTarget_patientRole_patient_name := ClinicalDocument_recordTarget_patientRole_patient.CreateElement("name")
	ClinicalDocument_recordTarget_patientRole_patient_name.SetText(cda.BPInfo.Name)
	ClinicalDocument_recordTarget_patientRole_patient_administrativeGenderCode := ClinicalDocument_recordTarget_patientRole_patient.CreateElement("administrativeGenderCode")
	ClinicalDocument_recordTarget_patientRole_patient_administrativeGenderCode.CreateAttr("code", cda.RInfo.GenderCode)
	ClinicalDocument_recordTarget_patientRole_patient_administrativeGenderCode.CreateAttr("codeSystem", "2.16.156.10011.2.3.3.4")
	ClinicalDocument_recordTarget_patientRole_patient_administrativeGenderCode.CreateAttr("codeSystemName", cda.RInfo.GenderName)
	ClinicalDocument_recordTarget_patientRole_patient_birthTime := ClinicalDocument_recordTarget_patientRole_patient.CreateElement("birthTime")
	ClinicalDocument_recordTarget_patientRole_patient_birthTime.CreateAttr("value", cda.BPInfo.BirthTime)
	ClinicalDocument_author := ClinicalDocument.CreateElement("author")
	ClinicalDocument_author.CreateAttr("typeCode", "AUT")
	ClinicalDocument_author.CreateAttr("contextControlCode", "OP")
	ClinicalDocument_author_time := ClinicalDocument_author.CreateElement("time")
	ClinicalDocument_author_time.CreateAttr("value", cda.RInfo.ReportTime)
	ClinicalDocument_author_assignedAuthor := ClinicalDocument_author.CreateElement("assignedAuthor")
	ClinicalDocument_author_assignedAuthor.CreateAttr("classCode", "ASSIGNED")
	ClinicalDocument_author_assignedAuthor_id := ClinicalDocument_author_assignedAuthor.CreateElement("id")
	ClinicalDocument_author_assignedAuthor_id.CreateAttr("root", "2.16.156.10011.1.7")
	ClinicalDocument_author_assignedAuthor_id.CreateAttr("extension", "")
	ClinicalDocument_author_assignedAuthor_code := ClinicalDocument_author_assignedAuthor.CreateElement("code")
	ClinicalDocument_author_assignedAuthor_code.CreateAttr("displayName", "报告医生")
	ClinicalDocument_author_assignedAuthor_assignedPerson := ClinicalDocument_author_assignedAuthor.CreateElement("assignedPerson")
	ClinicalDocument_author_assignedAuthor_assignedPerson_name := ClinicalDocument_author_assignedAuthor_assignedPerson.CreateElement("name")
	ClinicalDocument_author_assignedAuthor_assignedPerson_name.SetText(cda.RInfo.ReportDoctor)
	ClinicalDocument_custodian := ClinicalDocument.CreateElement("custodian")
	ClinicalDocument_custodian.CreateAttr("typeCode", "CST")
	ClinicalDocument_custodian_assignedCustodian := ClinicalDocument_custodian.CreateElement("assignedCustodian")
	ClinicalDocument_custodian_assignedCustodian.CreateAttr("classCode", "ASSIGNED")
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization := ClinicalDocument_custodian_assignedCustodian.CreateElement("representedCustodianOrganization")
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization.CreateAttr("classCode", "ORG")
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization.CreateAttr("determinerCode", "INSTANCE")
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization_id := ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization.CreateElement("id")
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization_id.CreateAttr("root", "16.156.10011.1.5")
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization_id.CreateAttr("extension", cda.BPInfo.OrganizationCode)
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization_name := ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization.CreateElement("name")
	ClinicalDocument_custodian_assignedCustodian_representedCustodianOrganization_name.SetText(cda.BPInfo.OrganizationName)
	ClinicalDocument_legalAuthenticator := ClinicalDocument.CreateElement("legalAuthenticator")
	ClinicalDocument_legalAuthenticator_time := ClinicalDocument_legalAuthenticator.CreateElement("time")
	ClinicalDocument_legalAuthenticator_time.CreateAttr("value", cda.RInfo.AuditTime)
	ClinicalDocument_legalAuthenticator.CreateElement("signatureCode")
	ClinicalDocument_legalAuthenticator_assignedEntity := ClinicalDocument_legalAuthenticator.CreateElement("assignedEntity")
	ClinicalDocument_legalAuthenticator_assignedEntity_id := ClinicalDocument_legalAuthenticator_assignedEntity.CreateElement("id")
	ClinicalDocument_legalAuthenticator_assignedEntity_id.CreateAttr("root", "2.16.156.10011.1.4")
	ClinicalDocument_legalAuthenticator_assignedEntity_id.CreateAttr("extension", "")
	ClinicalDocument_legalAuthenticator_assignedEntity_code := ClinicalDocument_legalAuthenticator_assignedEntity.CreateElement("code")
	ClinicalDocument_legalAuthenticator_assignedEntity_code.CreateAttr("displayName", "审核医生")
	ClinicalDocument_legalAuthenticator_assignedEntity_assignedPerson := ClinicalDocument_legalAuthenticator_assignedEntity.CreateElement("assignedPerson")
	ClinicalDocument_legalAuthenticator_assignedEntity_assignedPerson.CreateAttr("classCode", "PSN")
	ClinicalDocument_legalAuthenticator_assignedEntity_assignedPerson.CreateAttr("determnerCode", "INSTANCE")
	ClinicalDocument_legalAuthenticator_assignedEntity_assignedPerson_name := ClinicalDocument_legalAuthenticator_assignedEntity_assignedPerson.CreateElement("name")
	ClinicalDocument_legalAuthenticator_assignedEntity_assignedPerson_name.SetText(cda.RInfo.AuditDoctor)
	ClinicalDocument_authenticator := ClinicalDocument.CreateElement("authenticator")
	ClinicalDocument_authenticator_time := ClinicalDocument_authenticator.CreateElement("time")
	ClinicalDocument_authenticator_time.CreateAttr("value", cda.RInfo.StudyTime)
	ClinicalDocument_authenticator.CreateElement("signatureCode")
	ClinicalDocument_authenticator_assignedEntity := ClinicalDocument_authenticator.CreateElement("assignedEntity")
	ClinicalDocument_authenticator_assignedEntity_id := ClinicalDocument_authenticator_assignedEntity.CreateElement("id")
	ClinicalDocument_authenticator_assignedEntity_id.CreateAttr("root", "2.16.156.10011.1.4")
	ClinicalDocument_authenticator_assignedEntity_id.CreateAttr("extension", "")
	ClinicalDocument_authenticator_assignedEntity_code := ClinicalDocument_authenticator_assignedEntity.CreateElement("code")
	ClinicalDocument_authenticator_assignedEntity_code.CreateAttr("displayName", "检查技师")
	ClinicalDocument_authenticator_assignedEntity_assignedPerson := ClinicalDocument_authenticator_assignedEntity.CreateElement("assignedPerson")
	ClinicalDocument_authenticator_assignedEntity_assignedPerson.CreateAttr("classCode", "PSN")
	ClinicalDocument_authenticator_assignedEntity_assignedPerson.CreateAttr("determnerCode", "INSTANCE")
	ClinicalDocument_authenticator_assignedEntity_assignedPerson_name := ClinicalDocument_authenticator_assignedEntity_assignedPerson.CreateElement("name")
	ClinicalDocument_authenticator_assignedEntity_assignedPerson_name.SetText(cda.RInfo.CheckDoctor)
	ClinicalDocument_participant := ClinicalDocument.CreateElement("participant")
	ClinicalDocument_participant.CreateAttr("typeCode", "PRF")
	ClinicalDocument_participant_associatedEntity := ClinicalDocument_participant.CreateElement("associatedEntity")
	ClinicalDocument_participant_associatedEntity.CreateAttr("classCode", "ASSIGNED")
	ClinicalDocument_participant_associatedEntity_scopingOrganization := ClinicalDocument_participant_associatedEntity.CreateElement("scopingOrganization")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_id := ClinicalDocument_participant_associatedEntity_scopingOrganization.CreateElement("id")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_id.CreateAttr("root", "2.16.156.10011.1.26")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_id.CreateAttr("extension", "")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_name := ClinicalDocument_participant_associatedEntity_scopingOrganization.CreateElement("name")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_name.SetText(cda.RInfo.ApplyDepartmentName)
	ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf := ClinicalDocument_participant_associatedEntity_scopingOrganization.CreateElement("asOrganizationPartOf")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization := ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf.CreateElement("wholeOrganization")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization_id := ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization.CreateElement("id")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization_id.CreateAttr("root", "2.16.156.10011.1.5")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization_id.CreateAttr("extension", cda.BPInfo.OrganizationCode)
	ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization_name := ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization.CreateElement("name")
	ClinicalDocument_participant_associatedEntity_scopingOrganization_asOrganizationPartOf_wholeOrganization_name.SetText(cda.BPInfo.OrganizationName)
	ClinicalDocument_relatedDocument := ClinicalDocument.CreateElement("relatedDocument")
	ClinicalDocument_relatedDocument.CreateAttr("typeCode", "RPLC")
	ClinicalDocument_relatedDocument_parentDocument := ClinicalDocument_relatedDocument.CreateElement("parentDocument")
	ClinicalDocument_relatedDocument_parentDocument.CreateElement("id")
	ClinicalDocument_relatedDocument_parentDocument.CreateElement("setId")
	ClinicalDocument_relatedDocument_parentDocument.CreateElement("versionNumber")
	ClinicalDocument_componentOf := ClinicalDocument.CreateElement("componentOf")
	ClinicalDocument_componentOf_encompassingEncounter := ClinicalDocument_componentOf.CreateElement("encompassingEncounter")
	ClinicalDocument_componentOf_encompassingEncounter.CreateElement("effectiveTime")
	ClinicalDocument_componentOf_encompassingEncounter_location := ClinicalDocument_componentOf_encompassingEncounter.CreateElement("location")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility := ClinicalDocument_componentOf_encompassingEncounter_location.CreateElement("healthCareFacility")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization := ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility.CreateElement("serviceProviderOrganization")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf := ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization.CreateElement("asOrganizationPartOf")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf.CreateAttr("classCode", "PART")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf_wholeOrganization := ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf.CreateElement("wholeOrganization")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf_wholeOrganization.CreateAttr("classCode", "ORG")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf_wholeOrganization.CreateAttr("determinerCode", "INSTANCE")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf_wholeOrganization_id := ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf_wholeOrganization.CreateElement("id")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf_wholeOrganization_id.CreateAttr("root", "2.16.156.10011.1.22")
	ClinicalDocument_componentOf_encompassingEncounter_location_healthCareFacility_serviceProviderOrganization_asOrganizationPartOf_wholeOrganization_id.CreateAttr("extension", cda.RInfo.SickbedIndex)
	ClinicalDocument_component := ClinicalDocument.CreateElement("component")
	ClinicalDocument_component_structuredBody := ClinicalDocument_component.CreateElement("structuredBody")
	ClinicalDocument_component_structuredBody_component := ClinicalDocument_component_structuredBody.CreateElement("component")
	ClinicalDocument_component_structuredBody_component_section := ClinicalDocument_component_structuredBody_component.CreateElement("section")
	ClinicalDocument_component_structuredBody_component_section_code := ClinicalDocument_component_structuredBody_component_section.CreateElement("code")
	ClinicalDocument_component_structuredBody_component_section_code.CreateAttr("code", "29545-1")
	ClinicalDocument_component_structuredBody_component_section_code.CreateAttr("displayName", "PHYSICAL EXAMINATION")
	ClinicalDocument_component_structuredBody_component_section_code.CreateAttr("codeSystem", "2.16.840.1.113883.6.1")
	ClinicalDocument_component_structuredBody_component_section_code.CreateAttr("codeSystemName", "LOINC")
	ClinicalDocument_component_structuredBody_component_section.CreateElement("text")
	ClinicalDocument_component_structuredBody_component_section_entry1 := ClinicalDocument_component_structuredBody_component_section.CreateElement("entry")
	ClinicalDocument_component_structuredBody_component_section_entry1_deviceModel := ClinicalDocument_component_structuredBody_component_section_entry1.CreateElement("deviceModel")
	ClinicalDocument_component_structuredBody_component_section_entry1_deviceModel.SetText("GE5800")
	ClinicalDocument_component_structuredBody_component_section_entry1_deviceName := ClinicalDocument_component_structuredBody_component_section_entry1.CreateElement("deviceName")
	ClinicalDocument_component_structuredBody_component_section_entry1_deviceName.SetText(cda.RInfo.DeviceCode)
	ClinicalDocument_component_structuredBody_component_section_entry1_registerDate := ClinicalDocument_component_structuredBody_component_section_entry1.CreateElement("registerDate")
	ClinicalDocument_component_structuredBody_component_section_entry1_registerDate.SetText(cda.RInfo.ReportTime)
	ClinicalDocument_component_structuredBody_component_section_entry1_bodyAlias := ClinicalDocument_component_structuredBody_component_section_entry1.CreateElement("bodyAlias")
	ClinicalDocument_component_structuredBody_component_section_entry1_bodyAlias.SetText(cda.RInfo.BodyPart)
	ClinicalDocument_component_structuredBody_component_section_entry2 := ClinicalDocument_component_structuredBody_component_section.CreateElement("entry")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation := ClinicalDocument_component_structuredBody_component_section_entry2.CreateElement("observation")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation.CreateAttr("classCode", "OBS")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation.CreateAttr("moodCode", "EVN")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_code := ClinicalDocument_component_structuredBody_component_section_entry2_observation.CreateElement("code")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_code.CreateAttr("code", "DE04.30.018.00")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_code.CreateAttr("codeSystem", "2.16.156.1001l.2.2.1")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_code.CreateAttr("codeSystemName", "卫生信息数据元目录")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_code.CreateAttr("displayName", "检查类别")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_value := ClinicalDocument_component_structuredBody_component_section_entry2_observation.CreateElement("value")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_value.CreateAttr("xsi:type", "ST")
	ClinicalDocument_component_structuredBody_component_section_entry2_observation_value.SetText(cda.RInfo.ModalityName)
	ClinicalDocument_component_structuredBody_component_section_entry3 := ClinicalDocument_component_structuredBody_component_section.CreateElement("entry")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer := ClinicalDocument_component_structuredBody_component_section_entry3.CreateElement("organizer")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer.CreateAttr("classCode", "CLUSTER")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer.CreateAttr("moodCode", "EVN")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer.CreateElement("statusCode")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component := ClinicalDocument_component_structuredBody_component_section_entry3_organizer.CreateElement("component")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation := ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component.CreateElement("observation")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation.CreateAttr("classCode", "OBS")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation.CreateAttr("moodCode", "EVN")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_code := ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation.CreateElement("code")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_code.CreateAttr("code", "DE04.30.020.00")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_code.CreateAttr("codeSystem", "2.16.156.10011.2.2.1")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_code.CreateAttr("codeSystemName", "卫生信息数据元目录")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_code.CreateAttr("displayName", "检查项目代码")
	// 2022-08-15 增加互认编码
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_standardCode := ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation.CreateElement("standardCode")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_standardCode.CreateAttr("code", cda.RInfo.CheckItemsCode)
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_standardCode.CreateAttr("name", cda.RInfo.CheckItems)

	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_effectiveTime := ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation.CreateElement("effectiveTime")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_effectiveTime.CreateAttr("value", cda.RInfo.StudyTime)
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_value := ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation.CreateElement("value")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_value.CreateAttr("xsi:type", "ST")
	ClinicalDocument_component_structuredBody_component_section_entry3_organizer_component_observation_value.SetText(cda.RInfo.CheckItems)
	ClinicalDocument_component_structuredBody_component2 := ClinicalDocument_component_structuredBody.CreateElement("component")
	ClinicalDocument_component_structuredBody_component2_section := ClinicalDocument_component_structuredBody_component2.CreateElement("section")
	ClinicalDocument_component_structuredBody_component2_section_code := ClinicalDocument_component_structuredBody_component2_section.CreateElement("code")
	ClinicalDocument_component_structuredBody_component2_section_code.CreateAttr("displayName", "检查报告")
	ClinicalDocument_component_structuredBody_component2_section.CreateElement("text")
	ClinicalDocument_component_structuredBody_component2_section_entry1 := ClinicalDocument_component_structuredBody_component2_section.CreateElement("entry")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation := ClinicalDocument_component_structuredBody_component2_section_entry1.CreateElement("observation")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation.CreateAttr("classCode", "OBS")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation.CreateAttr("moodCode", "EVN")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_code := ClinicalDocument_component_structuredBody_component2_section_entry1_observation.CreateElement("code")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_code.CreateAttr("code", "DE04.50.131.00")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_code.CreateAttr("codeSystem", "2.16.156.10011.2.2.1")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_code.CreateAttr("codeSystemName", "卫生信息数据元目录")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_code.CreateAttr("displayName", "检查报告结果-客观所见")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_value := ClinicalDocument_component_structuredBody_component2_section_entry1_observation.CreateElement("value")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_value.CreateAttr("xsi:type", "ST")
	ClinicalDocument_component_structuredBody_component2_section_entry1_observation_value.SetText(cda.RInfo.Finding)
	ClinicalDocument_component_structuredBody_component2_section_entry2 := ClinicalDocument_component_structuredBody_component2_section.CreateElement("entry")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation := ClinicalDocument_component_structuredBody_component2_section_entry2.CreateElement("observation")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation.CreateAttr("classCode", "OBS")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation.CreateAttr("moodCode", "EVN")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_code := ClinicalDocument_component_structuredBody_component2_section_entry2_observation.CreateElement("code")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_code.CreateAttr("code", "DE04.50.132.00")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_code.CreateAttr("codeSystem", "2.16.156.10011.2.2.1")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_code.CreateAttr("codeSystemName", "卫生信息数据元目录")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_code.CreateAttr("displayName", "检查报告结果-主观提示")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_value := ClinicalDocument_component_structuredBody_component2_section_entry2_observation.CreateElement("value")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_value.CreateAttr("xsi:type", "ST")
	ClinicalDocument_component_structuredBody_component2_section_entry2_observation_value.SetText(cda.RInfo.Conclusion)
	ClinicalDocument_component_structuredBody_component2_section_entry3 := ClinicalDocument_component_structuredBody_component2_section.CreateElement("entry")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation := ClinicalDocument_component_structuredBody_component2_section_entry3.CreateElement("observation")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation.CreateAttr("classCode", "OBS")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation.CreateAttr("moodCode", "EVN")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_code := ClinicalDocument_component_structuredBody_component2_section_entry3_observation.CreateElement("code")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_code.CreateAttr("code", "DE08.10.013.00")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_code.CreateAttr("codeSystem", "2.16.156.10011.2.2.1")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_code.CreateAttr("codeSystemName", "卫生信息数据元目录")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_code.CreateAttr("displayName", "检查报告机构名称")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_value := ClinicalDocument_component_structuredBody_component2_section_entry3_observation.CreateElement("value")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_value.CreateAttr("xsi:type", "ST")
	ClinicalDocument_component_structuredBody_component2_section_entry3_observation_value.SetText(cda.BPInfo.OrganizationName)
	ClinicalDocument_component_structuredBody_component2_section_entry4 := ClinicalDocument_component_structuredBody_component2_section.CreateElement("entry")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation := ClinicalDocument_component_structuredBody_component2_section_entry4.CreateElement("observation")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation.CreateAttr("classCode", "OBS")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation.CreateAttr("moodCode", "EVN")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation_code := ClinicalDocument_component_structuredBody_component2_section_entry4_observation.CreateElement("code")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation_code.CreateAttr("code", "DE06.00.179.00")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation_code.CreateAttr("codeSystem", "2.16.156.10011.2.2.1")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation_code.CreateAttr("codeSystemName", "卫生信息数据元目录")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation_code.CreateAttr("displayName", "检查报告备注")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation_value := ClinicalDocument_component_structuredBody_component2_section_entry4_observation.CreateElement("value")
	ClinicalDocument_component_structuredBody_component2_section_entry4_observation_value.CreateAttr("xsi:type", "ST")
	// xml 缩进q
	doc.Indent(4)
	//doc.WriteTo(os.Stdout)
	return doc.WriteToFile(xmlfile)
}

// 注册检查信息/影像清单
func WriteProvideAndRegisterDocumentSetXML(obj global.DocInfo) (reqbody string, err error) {
	doc := etree.NewDocument()
	// doc.CreateProcInst("xml", `version="1.0" encoding="utf-8"`)
	// doc.CreateProcInst("xml-stylesheet", `type="text/xsl" href="style.xsl"`)
	s_Envelope := doc.CreateElement("s:Envelope")
	s_Envelope.CreateAttr("xmlns:a", "http://www.w3.org/2005/08/addressing")
	s_Envelope.CreateAttr("xmlns:s", "http://www.w3.org/2003/05/soap-envelope")
	s_Header := s_Envelope.CreateElement("s:Header")
	a_Action := s_Header.CreateElement("a:Action")
	a_Action.CreateAttr("s:mustUnderstand", "1")
	a_Action.SetText("urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-b")
	a_MessageID := s_Header.CreateElement("a:MessageID")
	a_MessageID.SetText("urn:uuid:d5939557-7d79-4103-9509-3a6266b09f55")
	a_ReplyTo := s_Header.CreateElement("a:ReplyTo")
	a_Address := a_ReplyTo.CreateElement("a:Address")
	a_Address.SetText("http://www.w3.org/2005/08/addressing/anonymous")
	a_To := s_Header.CreateElement("a:To")
	a_To.CreateAttr("s:mustUnderstand", "1")
	a_To.SetText("http://localhost:8086/DocRepositoryService.svc")
	s_Body := s_Envelope.CreateElement("s:Body")
	s_Body.CreateAttr("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance")
	s_Body.CreateAttr("xmlns:xsd", "http://www.w3.org/2001/XMLSchema")
	ProvideAndRegisterDocumentSetRequest := s_Body.CreateElement("ProvideAndRegisterDocumentSetRequest")
	ProvideAndRegisterDocumentSetRequest.CreateAttr("xmlns", "urn:ihe:iti:xds-b:2007")
	SubmitObjectsRequest := ProvideAndRegisterDocumentSetRequest.CreateElement("SubmitObjectsRequest")
	SubmitObjectsRequest.CreateAttr("xmlns", "urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0")
	RegistryObjectList := SubmitObjectsRequest.CreateElement("RegistryObjectList")
	RegistryObjectList.CreateAttr("xmlns", "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0")
	RegistryPackage := RegistryObjectList.CreateElement("RegistryPackage")
	RegistryPackage.CreateAttr("id", "urn:uuid:"+obj.Object.Uid_Enc)
	RegistryPackage.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage")
	RegistryPackage_Slot := RegistryPackage.CreateElement("Slot")
	RegistryPackage_Slot.CreateAttr("name", "submissionTime")
	RegistryPackage_Slot_ValueList := RegistryPackage_Slot.CreateElement("ValueList")
	RegistryPackage_Slot_ValueList_Value := RegistryPackage_Slot_ValueList.CreateElement("Value")
	RegistryPackage_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	RegistryPackage_Name := RegistryPackage.CreateElement("Name")
	RegistryPackage_Name_LocalizedString := RegistryPackage_Name.CreateElement("LocalizedString")
	RegistryPackage_Name_LocalizedString.CreateAttr("value", obj.CDA.RInfo.CheckItems)
	RegistryPackage_Classification := RegistryPackage.CreateElement("Classification")
	RegistryPackage_Classification.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	RegistryPackage_Classification.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	RegistryPackage_Classification.CreateAttr("classificationScheme", "urn:uuid:aa543740-bdda-424e-8c96-df4873be8500")
	RegistryPackage_Classification.CreateAttr("classifiedObject", "urn:uuid:"+obj.Object.Uid_Enc)
	RegistryPackage_Classification.CreateAttr("nodeRepresentation", "Targeted history and physical")
	RegistryPackage_Classification_Slot := RegistryPackage_Classification.CreateElement("Slot")
	RegistryPackage_Classification_Slot.CreateAttr("name", "codingScheme")
	RegistryPackage_Classification_Slot_ValueList := RegistryPackage_Classification_Slot.CreateElement("ValueList")
	RegistryPackage_Classification_Slot_ValueList_Value := RegistryPackage_Classification_Slot_ValueList.CreateElement("Value")
	RegistryPackage_Classification_Slot_ValueList_Value.SetText("Connect-a-thon contentTypeCodes")
	RegistryPackage_Classification_Name := RegistryPackage_Classification.CreateElement("Name")
	RegistryPackage_Classification_Name_LocalizedString := RegistryPackage_Classification_Name.CreateElement("LocalizedString")
	RegistryPackage_Classification_Name_LocalizedString.CreateAttr("value", "Targeted history and physical")
	RegistryPackage_Classification2 := RegistryPackage.CreateElement("Classification")
	RegistryPackage_Classification2.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	RegistryPackage_Classification2.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	RegistryPackage_Classification2.CreateAttr("classificationScheme", "urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d")
	RegistryPackage_Classification2.CreateAttr("classifiedObject", "urn:uuid:"+obj.Object.Uid_Enc)
	RegistryPackage_Classification2.CreateAttr("nodeRepresentation", "")
	RegistryPackage_Classification2_Slot := RegistryPackage_Classification2.CreateElement("Slot")
	RegistryPackage_Classification2_Slot.CreateAttr("name", "authorPerson")
	RegistryPackage_Classification2_Slot_ValueList := RegistryPackage_Classification2_Slot.CreateElement("ValueList")
	RegistryPackage_Classification2_Slot_ValueList_Value := RegistryPackage_Classification2_Slot_ValueList.CreateElement("Value")
	RegistryPackage_Classification2_Slot_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	RegistryPackage_Classification2_Slot2 := RegistryPackage_Classification2.CreateElement("Slot")
	RegistryPackage_Classification2_Slot2.CreateAttr("name", "authorInstitution")
	RegistryPackage_Classification2_Slot2_ValueList := RegistryPackage_Classification2_Slot2.CreateElement("ValueList")
	RegistryPackage_Classification2_Slot2_ValueList_Value := RegistryPackage_Classification2_Slot2_ValueList.CreateElement("Value")
	RegistryPackage_Classification2_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	RegistryPackage_Classification2_Slot3 := RegistryPackage_Classification2.CreateElement("Slot")
	RegistryPackage_Classification2_Slot3.CreateAttr("name", "authorRole")
	RegistryPackage_Classification2_Slot3_ValueList := RegistryPackage_Classification2_Slot3.CreateElement("ValueList")
	RegistryPackage_Classification2_Slot3_ValueList_Value := RegistryPackage_Classification2_Slot3_ValueList.CreateElement("Value")
	RegistryPackage_Classification2_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	RegistryPackage_Classification2_Slot4 := RegistryPackage_Classification2.CreateElement("Slot")
	RegistryPackage_Classification2_Slot4.CreateAttr("name", "authorSpecialty")
	RegistryPackage_Classification2_Slot4_ValueList := RegistryPackage_Classification2_Slot4.CreateElement("ValueList")
	RegistryPackage_Classification2_Slot4_ValueList_Value := RegistryPackage_Classification2_Slot4_ValueList.CreateElement("Value")
	RegistryPackage_Classification2_Slot4_ValueList_Value.SetText("放射学")
	RegistryPackage_Classification3 := RegistryPackage.CreateElement("Classification")
	RegistryPackage_Classification3.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	RegistryPackage_Classification3.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	RegistryPackage_Classification3.CreateAttr("classificationScheme", "urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d")
	RegistryPackage_Classification3.CreateAttr("classifiedObject", "urn:uuid:"+obj.Object.Uid_Enc)
	RegistryPackage_Classification3.CreateAttr("nodeRepresentation", "")
	RegistryPackage_Classification3_Slot := RegistryPackage_Classification3.CreateElement("Slot")
	RegistryPackage_Classification3_Slot.CreateAttr("name", "authorPerson")
	RegistryPackage_Classification3_Slot_ValueList := RegistryPackage_Classification3_Slot.CreateElement("ValueList")
	RegistryPackage_Classification3_Slot_ValueList_Value := RegistryPackage_Classification3_Slot_ValueList.CreateElement("Value")
	RegistryPackage_Classification3_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	RegistryPackage_Classification3_Slot2 := RegistryPackage_Classification3.CreateElement("Slot")
	RegistryPackage_Classification3_Slot2.CreateAttr("name", "authorInstitution")
	RegistryPackage_Classification3_Slot2_ValueList := RegistryPackage_Classification3_Slot2.CreateElement("ValueList")
	RegistryPackage_Classification3_Slot2_ValueList_Value := RegistryPackage_Classification3_Slot2_ValueList.CreateElement("Value")
	RegistryPackage_Classification3_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	RegistryPackage_Classification3_Slot3 := RegistryPackage_Classification3.CreateElement("Slot")
	RegistryPackage_Classification3_Slot3.CreateAttr("name", "authorRole")
	RegistryPackage_Classification3_Slot3_ValueList := RegistryPackage_Classification3_Slot3.CreateElement("ValueList")
	RegistryPackage_Classification3_Slot3_ValueList_Value := RegistryPackage_Classification3_Slot3_ValueList.CreateElement("Value")
	RegistryPackage_Classification3_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	RegistryPackage_Classification3_Slot4 := RegistryPackage_Classification3.CreateElement("Slot")
	RegistryPackage_Classification3_Slot4.CreateAttr("name", "authorSpecialty")
	RegistryPackage_Classification3_Slot4_ValueList := RegistryPackage_Classification3_Slot4.CreateElement("ValueList")
	RegistryPackage_Classification3_Slot4_ValueList_Value := RegistryPackage_Classification3_Slot4_ValueList.CreateElement("Value")
	RegistryPackage_Classification3_Slot4_ValueList_Value.SetText("放射学")
	RegistryPackage_ExternalIdentifier := RegistryPackage.CreateElement("ExternalIdentifier")
	RegistryPackage_ExternalIdentifier.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	RegistryPackage_ExternalIdentifier.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	RegistryPackage_ExternalIdentifier.CreateAttr("registryObject", "urn:uuid:"+obj.Object.Uid_Enc)
	RegistryPackage_ExternalIdentifier.CreateAttr("identificationScheme", "urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446")
	RegistryPackage_ExternalIdentifier.CreateAttr("value", obj.CDA.BPInfo.PatientID+"^^^&"+obj.CDA.BPInfo.InteractionId+"&ISO")
	RegistryPackage_ExternalIdentifier_Name := RegistryPackage_ExternalIdentifier.CreateElement("Name")
	RegistryPackage_ExternalIdentifier_Name_LocalizedString := RegistryPackage_ExternalIdentifier_Name.CreateElement("LocalizedString")
	RegistryPackage_ExternalIdentifier_Name_LocalizedString.CreateAttr("value", "XDSSubmissionSet.patientId")
	RegistryPackage_ExternalIdentifier2 := RegistryPackage.CreateElement("ExternalIdentifier")
	RegistryPackage_ExternalIdentifier2.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	RegistryPackage_ExternalIdentifier2.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	RegistryPackage_ExternalIdentifier2.CreateAttr("registryObject", "urn:uuid:"+obj.Object.Uid_Enc)
	RegistryPackage_ExternalIdentifier2.CreateAttr("identificationScheme", "urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832")
	RegistryPackage_ExternalIdentifier2.CreateAttr("value", obj.CDA.BPInfo.InteractionId+"."+obj.CDA.BPInfo.OrganizationCode+"."+uuid.NewV4().String())
	RegistryPackage_ExternalIdentifier2_Name := RegistryPackage_ExternalIdentifier2.CreateElement("Name")
	RegistryPackage_ExternalIdentifier2_Name_LocalizedString := RegistryPackage_ExternalIdentifier2_Name.CreateElement("LocalizedString")
	RegistryPackage_ExternalIdentifier2_Name_LocalizedString.CreateAttr("value", "XDSSubmissionSet.sourceId")
	RegistryPackage_ExternalIdentifier3 := RegistryPackage.CreateElement("ExternalIdentifier")
	RegistryPackage_ExternalIdentifier3.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	RegistryPackage_ExternalIdentifier3.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	RegistryPackage_ExternalIdentifier3.CreateAttr("registryObject", "urn:uuid:"+obj.Object.Uid_Enc)
	RegistryPackage_ExternalIdentifier3.CreateAttr("identificationScheme", "urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8")
	RegistryPackage_ExternalIdentifier3.CreateAttr("value", obj.CDA.BPInfo.InteractionId+"."+obj.CDA.BPInfo.OrganizationCode+"."+uuid.NewV4().String())
	RegistryPackage_ExternalIdentifier3_Name := RegistryPackage_ExternalIdentifier3.CreateElement("Name")
	RegistryPackage_ExternalIdentifier3_Name_LocalizedString := RegistryPackage_ExternalIdentifier3_Name.CreateElement("LocalizedString")
	RegistryPackage_ExternalIdentifier3_Name_LocalizedString.CreateAttr("value", "XDSSubmissionSet.uniqueId")
	Classification := RegistryObjectList.CreateElement("Classification")
	Classification.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	Classification.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	Classification.CreateAttr("classifiedObject", "urn:uuid:"+obj.Object.Uid_Enc)
	Classification.CreateAttr("classificationNode", "urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd")

	ExtrinsicObject := RegistryObjectList.CreateElement("ExtrinsicObject")
	ExtrinsicObject.CreateAttr("id", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject.CreateAttr("objectType", "urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1")
	ExtrinsicObject.CreateAttr("mimeType", "text/xml")
	ExtrinsicObject_Slot := ExtrinsicObject.CreateElement("Slot")
	ExtrinsicObject_Slot.CreateAttr("name", "creationTime")
	ExtrinsicObject_Slot_ValueList := ExtrinsicObject_Slot.CreateElement("ValueList")
	ExtrinsicObject_Slot_ValueList_Value := ExtrinsicObject_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	ExtrinsicObject_Slot2 := ExtrinsicObject.CreateElement("Slot")
	ExtrinsicObject_Slot2.CreateAttr("name", "languageCode")
	ExtrinsicObject_Slot2_ValueList := ExtrinsicObject_Slot2.CreateElement("ValueList")
	ExtrinsicObject_Slot2_ValueList_Value := ExtrinsicObject_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot2_ValueList_Value.SetText("zh-cn")
	ExtrinsicObject_Slot3 := ExtrinsicObject.CreateElement("Slot")
	ExtrinsicObject_Slot3.CreateAttr("name", "serviceStartTime")
	ExtrinsicObject_Slot3_ValueList := ExtrinsicObject_Slot3.CreateElement("ValueList")
	ExtrinsicObject_Slot3_ValueList_Value := ExtrinsicObject_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	ExtrinsicObject_Slot4 := ExtrinsicObject.CreateElement("Slot")
	ExtrinsicObject_Slot4.CreateAttr("name", "serviceStopTime")
	ExtrinsicObject_Slot4_ValueList := ExtrinsicObject_Slot4.CreateElement("ValueList")
	ExtrinsicObject_Slot4_ValueList_Value := ExtrinsicObject_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot4_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	ExtrinsicObject_Slot5 := ExtrinsicObject.CreateElement("Slot")
	ExtrinsicObject_Slot5.CreateAttr("name", "sourcePatientId")
	ExtrinsicObject_Slot5_ValueList := ExtrinsicObject_Slot5.CreateElement("ValueList")
	ExtrinsicObject_Slot5_ValueList_Value := ExtrinsicObject_Slot5_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot5_ValueList_Value.SetText(obj.CDA.BPInfo.PatientID + "^^^&" + obj.CDA.BPInfo.InteractionId + "&ISO")
	ExtrinsicObject_Slot6 := ExtrinsicObject.CreateElement("Slot")
	ExtrinsicObject_Slot6.CreateAttr("name", "sourcePatientInfo")
	ExtrinsicObject_Slot6_ValueList := ExtrinsicObject_Slot6.CreateElement("ValueList")
	ExtrinsicObject_Slot6_ValueList_Value := ExtrinsicObject_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot6_ValueList_Value.SetText("PID-3|" + obj.CDA.BPInfo.PatientID)
	ExtrinsicObject_Slot6_ValueList_Value2 := ExtrinsicObject_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot6_ValueList_Value2.SetText("PID-5|" + obj.CDA.BPInfo.Name)
	ExtrinsicObject_Slot6_ValueList_Value3 := ExtrinsicObject_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot6_ValueList_Value3.SetText("PID-7|" + obj.CDA.BPInfo.BirthTime)
	ExtrinsicObject_Slot6_ValueList_Value4 := ExtrinsicObject_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject_Slot6_ValueList_Value4.SetText("PID-8|" + obj.CDA.BPInfo.Gender)
	ExtrinsicObject_Name := ExtrinsicObject.CreateElement("Name")
	ExtrinsicObject_Name_LocalizedString := ExtrinsicObject_Name.CreateElement("LocalizedString")
	ExtrinsicObject_Name_LocalizedString.CreateAttr("value", obj.CDA.RInfo.CheckItems)
	ExtrinsicObject_Description := ExtrinsicObject.CreateElement("Description")
	ExtrinsicObject_Description_LocalizedString := ExtrinsicObject_Description.CreateElement("LocalizedString")
	ExtrinsicObject_Description_LocalizedString.CreateAttr("value", obj.CDA.RInfo.AccessionNumber+"^"+obj.CDA.RInfo.StudyInstanceUid)
	ExtrinsicObject_Classification := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification.CreateAttr("classificationScheme", "urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a")
	ExtrinsicObject_Classification.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject_Classification_Slot := ExtrinsicObject_Classification.CreateElement("Slot")
	ExtrinsicObject_Classification_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject_Classification_Slot_ValueList := ExtrinsicObject_Classification_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification_Slot_ValueList_Value := ExtrinsicObject_Classification_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification_Slot_ValueList_Value.SetText(obj.CDA.RInfo.ModalityName)
	ExtrinsicObject_Classification_Name := ExtrinsicObject_Classification.CreateElement("Name")
	ExtrinsicObject_Classification_Name_LocalizedString := ExtrinsicObject_Classification_Name.CreateElement("LocalizedString")
	ExtrinsicObject_Classification_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject_Classification2 := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification2.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification2.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification2.CreateAttr("classificationScheme", "urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f")
	ExtrinsicObject_Classification2.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification2.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject_Classification2_Slot := ExtrinsicObject_Classification2.CreateElement("Slot")
	ExtrinsicObject_Classification2_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject_Classification2_Slot_ValueList := ExtrinsicObject_Classification2_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification2_Slot_ValueList_Value := ExtrinsicObject_Classification2_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification2_Slot_ValueList_Value.SetText("普通")
	ExtrinsicObject_Classification2_Name := ExtrinsicObject_Classification2.CreateElement("Name")
	ExtrinsicObject_Classification2_Name_LocalizedString := ExtrinsicObject_Classification2_Name.CreateElement("LocalizedString")
	ExtrinsicObject_Classification2_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject_Classification3 := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification3.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification3.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification3.CreateAttr("classificationScheme", "urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d")
	ExtrinsicObject_Classification3.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification3.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject_Classification3_Slot := ExtrinsicObject_Classification3.CreateElement("Slot")
	ExtrinsicObject_Classification3_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject_Classification3_Slot_ValueList := ExtrinsicObject_Classification3_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification3_Slot_ValueList_Value := ExtrinsicObject_Classification3_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification3_Slot_ValueList_Value.SetText("HL7 CDA")
	ExtrinsicObject_Classification3_Name := ExtrinsicObject_Classification3.CreateElement("Name")
	ExtrinsicObject_Classification3_Name_LocalizedString := ExtrinsicObject_Classification3_Name.CreateElement("LocalizedString")
	ExtrinsicObject_Classification3_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject_Classification4 := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification4.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification4.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification4.CreateAttr("classificationScheme", "urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1")
	ExtrinsicObject_Classification4.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification4.CreateAttr("nodeRepresentation", obj.CDA.BPInfo.OrganizationCode)
	ExtrinsicObject_Classification4_Slot := ExtrinsicObject_Classification4.CreateElement("Slot")
	ExtrinsicObject_Classification4_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject_Classification4_Slot_ValueList := ExtrinsicObject_Classification4_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification4_Slot_ValueList_Value := ExtrinsicObject_Classification4_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification4_Slot_ValueList_Value.SetText("FacilityTypeCodes")
	ExtrinsicObject_Classification4_Name := ExtrinsicObject_Classification4.CreateElement("Name")
	ExtrinsicObject_Classification4_Name_LocalizedString := ExtrinsicObject_Classification4_Name.CreateElement("LocalizedString")
	ExtrinsicObject_Classification4_Name_LocalizedString.CreateAttr("value", obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject_Classification5 := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification5.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification5.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification5.CreateAttr("classificationScheme", "urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead")
	ExtrinsicObject_Classification5.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification5.CreateAttr("nodeRepresentation", "Radiology")
	ExtrinsicObject_Classification5_Slot := ExtrinsicObject_Classification5.CreateElement("Slot")
	ExtrinsicObject_Classification5_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject_Classification5_Slot_ValueList := ExtrinsicObject_Classification5_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification5_Slot_ValueList_Value := ExtrinsicObject_Classification5_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification5_Slot_ValueList_Value.SetText("PracticeSettingCodes")
	ExtrinsicObject_Classification5_Name := ExtrinsicObject_Classification5.CreateElement("Name")
	ExtrinsicObject_Classification5_Name_LocalizedString := ExtrinsicObject_Classification5_Name.CreateElement("LocalizedString")
	ExtrinsicObject_Classification5_Name_LocalizedString.CreateAttr("value", "Radiology")
	ExtrinsicObject_Classification6 := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification6.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification6.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification6.CreateAttr("classificationScheme", "urn:uuid:f0306f51-975f-434e-a61c-c59651d33983")
	ExtrinsicObject_Classification6.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification6.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject_Classification6_Slot := ExtrinsicObject_Classification6.CreateElement("Slot")
	ExtrinsicObject_Classification6_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject_Classification6_Slot_ValueList := ExtrinsicObject_Classification6_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification6_Slot_ValueList_Value := ExtrinsicObject_Classification6_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification6_Slot_ValueList_Value.SetText("REPORT")
	ExtrinsicObject_Classification6_Name := ExtrinsicObject_Classification6.CreateElement("Name")
	ExtrinsicObject_Classification6_Name_LocalizedString := ExtrinsicObject_Classification6_Name.CreateElement("LocalizedString")
	ExtrinsicObject_Classification6_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject_Classification7 := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification7.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification7.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification7.CreateAttr("classificationScheme", "urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d")
	ExtrinsicObject_Classification7.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification7.CreateAttr("nodeRepresentation", "")
	ExtrinsicObject_Classification7_Slot := ExtrinsicObject_Classification7.CreateElement("Slot")
	ExtrinsicObject_Classification7_Slot.CreateAttr("name", "authorPerson")
	ExtrinsicObject_Classification7_Slot_ValueList := ExtrinsicObject_Classification7_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification7_Slot_ValueList_Value := ExtrinsicObject_Classification7_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification7_Slot_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	ExtrinsicObject_Classification7_Slot2 := ExtrinsicObject_Classification7.CreateElement("Slot")
	ExtrinsicObject_Classification7_Slot2.CreateAttr("name", "authorInstitution")
	ExtrinsicObject_Classification7_Slot2_ValueList := ExtrinsicObject_Classification7_Slot2.CreateElement("ValueList")
	ExtrinsicObject_Classification7_Slot2_ValueList_Value := ExtrinsicObject_Classification7_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification7_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject_Classification7_Slot3 := ExtrinsicObject_Classification7.CreateElement("Slot")
	ExtrinsicObject_Classification7_Slot3.CreateAttr("name", "authorRole")
	ExtrinsicObject_Classification7_Slot3_ValueList := ExtrinsicObject_Classification7_Slot3.CreateElement("ValueList")
	ExtrinsicObject_Classification7_Slot3_ValueList_Value := ExtrinsicObject_Classification7_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification7_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	ExtrinsicObject_Classification7_Slot4 := ExtrinsicObject_Classification7.CreateElement("Slot")
	ExtrinsicObject_Classification7_Slot4.CreateAttr("name", "authorSpecialty")
	ExtrinsicObject_Classification7_Slot4_ValueList := ExtrinsicObject_Classification7_Slot4.CreateElement("ValueList")
	ExtrinsicObject_Classification7_Slot4_ValueList_Value := ExtrinsicObject_Classification7_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification7_Slot4_ValueList_Value.SetText("放射学")
	ExtrinsicObject_Classification8 := ExtrinsicObject.CreateElement("Classification")
	ExtrinsicObject_Classification8.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_Classification8.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject_Classification8.CreateAttr("classificationScheme", "urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d")
	ExtrinsicObject_Classification8.CreateAttr("classifiedObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_Classification8.CreateAttr("nodeRepresentation", "")
	ExtrinsicObject_Classification8_Slot := ExtrinsicObject_Classification8.CreateElement("Slot")
	ExtrinsicObject_Classification8_Slot.CreateAttr("name", "authorPerson")
	ExtrinsicObject_Classification8_Slot_ValueList := ExtrinsicObject_Classification8_Slot.CreateElement("ValueList")
	ExtrinsicObject_Classification8_Slot_ValueList_Value := ExtrinsicObject_Classification8_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification8_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	ExtrinsicObject_Classification8_Slot2 := ExtrinsicObject_Classification7.CreateElement("Slot")
	ExtrinsicObject_Classification8_Slot2.CreateAttr("name", "authorInstitution")
	ExtrinsicObject_Classification8_Slot2_ValueList := ExtrinsicObject_Classification8_Slot2.CreateElement("ValueList")
	ExtrinsicObject_Classification8_Slot2_ValueList_Value := ExtrinsicObject_Classification8_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification8_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject_Classification8_Slot3 := ExtrinsicObject_Classification8.CreateElement("Slot")
	ExtrinsicObject_Classification8_Slot3.CreateAttr("name", "authorRole")
	ExtrinsicObject_Classification8_Slot3_ValueList := ExtrinsicObject_Classification8_Slot3.CreateElement("ValueList")
	ExtrinsicObject_Classification8_Slot3_ValueList_Value := ExtrinsicObject_Classification8_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification8_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	ExtrinsicObject_Classification8_Slot4 := ExtrinsicObject_Classification8.CreateElement("Slot")
	ExtrinsicObject_Classification8_Slot4.CreateAttr("name", "authorSpecialty")
	ExtrinsicObject_Classification8_Slot4_ValueList := ExtrinsicObject_Classification8_Slot4.CreateElement("ValueList")
	ExtrinsicObject_Classification8_Slot4_ValueList_Value := ExtrinsicObject_Classification8_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject_Classification8_Slot4_ValueList_Value.SetText("放射学")
	ExtrinsicObject_ExternalIdentifier := ExtrinsicObject.CreateElement("ExternalIdentifier")
	ExtrinsicObject_ExternalIdentifier.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_ExternalIdentifier.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	ExtrinsicObject_ExternalIdentifier.CreateAttr("registryObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_ExternalIdentifier.CreateAttr("identificationScheme", "urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427")
	ExtrinsicObject_ExternalIdentifier.CreateAttr("value", obj.CDA.BPInfo.PatientID+"^^^&"+obj.CDA.BPInfo.InteractionId+"&ISO")
	ExtrinsicObject_ExternalIdentifier_Name := ExtrinsicObject_ExternalIdentifier.CreateElement("Name")
	ExtrinsicObject_ExternalIdentifier_Name_LocalizedString := ExtrinsicObject_ExternalIdentifier_Name.CreateElement("LocalizedString")
	ExtrinsicObject_ExternalIdentifier_Name_LocalizedString.CreateAttr("value", "XDSDocumentEntry.patientId")
	ExtrinsicObject_ExternalIdentifier1 := ExtrinsicObject.CreateElement("ExternalIdentifier")
	ExtrinsicObject_ExternalIdentifier1.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject_ExternalIdentifier1.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	ExtrinsicObject_ExternalIdentifier1.CreateAttr("registryObject", "urn:uuid:"+obj.CDAFileID)
	ExtrinsicObject_ExternalIdentifier1.CreateAttr("identificationScheme", "urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab")
	ExtrinsicObject_ExternalIdentifier1.CreateAttr("value", obj.CDA.BPInfo.InteractionId+"."+obj.CDA.BPInfo.OrganizationCode+"."+uuid.NewV4().String())
	ExtrinsicObject_ExternalIdentifier1_Name := ExtrinsicObject_ExternalIdentifier1.CreateElement("Name")
	ExtrinsicObject_ExternalIdentifier1_Name_LocalizedString := ExtrinsicObject_ExternalIdentifier1_Name.CreateElement("LocalizedString")
	ExtrinsicObject_ExternalIdentifier1_Name_LocalizedString.CreateAttr("value", "XDSDocumentEntry.uniqueId")

	ExtrinsicObject2 := RegistryObjectList.CreateElement("ExtrinsicObject")
	ExtrinsicObject2.CreateAttr("id", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2.CreateAttr("objectType", "urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1")
	ExtrinsicObject2.CreateAttr("mimeType", "application/pdf")
	ExtrinsicObject2_Slot := ExtrinsicObject2.CreateElement("Slot")
	ExtrinsicObject2_Slot.CreateAttr("name", "creationTime")
	ExtrinsicObject2_Slot_ValueList := ExtrinsicObject2_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Slot_ValueList_Value := ExtrinsicObject2_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	ExtrinsicObject2_Slot2 := ExtrinsicObject2.CreateElement("Slot")
	ExtrinsicObject2_Slot2.CreateAttr("name", "languageCode")
	ExtrinsicObject2_Slot2_ValueList := ExtrinsicObject2_Slot2.CreateElement("ValueList")
	ExtrinsicObject2_Slot2_ValueList_Value := ExtrinsicObject2_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot2_ValueList_Value.SetText("zh-cn")
	ExtrinsicObject2_Slot3 := ExtrinsicObject2.CreateElement("Slot")
	ExtrinsicObject2_Slot3.CreateAttr("name", "serviceStartTime")
	ExtrinsicObject2_Slot3_ValueList := ExtrinsicObject2_Slot3.CreateElement("ValueList")
	ExtrinsicObject2_Slot3_ValueList_Value := ExtrinsicObject2_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	ExtrinsicObject2_Slot4 := ExtrinsicObject2.CreateElement("Slot")
	ExtrinsicObject2_Slot4.CreateAttr("name", "serviceStopTime")
	ExtrinsicObject2_Slot4_ValueList := ExtrinsicObject2_Slot4.CreateElement("ValueList")
	ExtrinsicObject2_Slot4_ValueList_Value := ExtrinsicObject2_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot4_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	ExtrinsicObject2_Slot5 := ExtrinsicObject2.CreateElement("Slot")
	ExtrinsicObject2_Slot5.CreateAttr("name", "sourcePatientId")
	ExtrinsicObject2_Slot5_ValueList := ExtrinsicObject2_Slot5.CreateElement("ValueList")
	ExtrinsicObject2_Slot5_ValueList_Value := ExtrinsicObject2_Slot5_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot5_ValueList_Value.SetText(obj.CDA.BPInfo.PatientID + "^^^&" + obj.CDA.BPInfo.InteractionId + "&ISO")
	ExtrinsicObject2_Slot6 := ExtrinsicObject2.CreateElement("Slot")
	ExtrinsicObject2_Slot6.CreateAttr("name", "sourcePatientInfo")
	ExtrinsicObject2_Slot6_ValueList := ExtrinsicObject2_Slot6.CreateElement("ValueList")
	ExtrinsicObject2_Slot6_ValueList_Value := ExtrinsicObject2_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot6_ValueList_Value.SetText("PID-3|" + obj.CDA.BPInfo.PatientID)
	ExtrinsicObject2_Slot6_ValueList_Value2 := ExtrinsicObject2_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot6_ValueList_Value2.SetText("PID-5|" + obj.CDA.BPInfo.Name)
	ExtrinsicObject2_Slot6_ValueList_Value3 := ExtrinsicObject2_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot6_ValueList_Value3.SetText("PID-7|" + obj.CDA.BPInfo.BirthTime)
	ExtrinsicObject2_Slot6_ValueList_Value4 := ExtrinsicObject2_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject2_Slot6_ValueList_Value4.SetText("PID-8|" + obj.CDA.BPInfo.Gender)
	ExtrinsicObject2_Name := ExtrinsicObject2.CreateElement("Name")
	ExtrinsicObject2_Name_LocalizedString := ExtrinsicObject2_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_Name_LocalizedString.CreateAttr("value", obj.CDA.RInfo.CheckItems)
	ExtrinsicObject2_Description := ExtrinsicObject2.CreateElement("Description")
	ExtrinsicObject2_Description_LocalizedString := ExtrinsicObject2_Description.CreateElement("LocalizedString")
	ExtrinsicObject2_Description_LocalizedString.CreateAttr("value", obj.CDA.RInfo.AccessionNumber+"^"+obj.CDA.RInfo.StudyInstanceUid)
	ExtrinsicObject2_Classification := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification.CreateAttr("classificationScheme", "urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a")
	ExtrinsicObject2_Classification.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject2_Classification_Slot := ExtrinsicObject2_Classification.CreateElement("Slot")
	ExtrinsicObject2_Classification_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject2_Classification_Slot_ValueList := ExtrinsicObject2_Classification_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification_Slot_ValueList_Value := ExtrinsicObject2_Classification_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification_Slot_ValueList_Value.SetText("REPORT")
	ExtrinsicObject2_Classification_Name := ExtrinsicObject2_Classification.CreateElement("Name")
	ExtrinsicObject2_Classification_Name_LocalizedString := ExtrinsicObject2_Classification_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_Classification_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject2_Classification2 := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification2.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification2.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification2.CreateAttr("classificationScheme", "urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f")
	ExtrinsicObject2_Classification2.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification2.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject2_Classification2_Slot := ExtrinsicObject2_Classification2.CreateElement("Slot")
	ExtrinsicObject2_Classification2_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject2_Classification2_Slot_ValueList := ExtrinsicObject2_Classification2_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification2_Slot_ValueList_Value := ExtrinsicObject2_Classification2_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification2_Slot_ValueList_Value.SetText("N")
	ExtrinsicObject2_Classification2_Name := ExtrinsicObject2_Classification2.CreateElement("Name")
	ExtrinsicObject2_Classification2_Name_LocalizedString := ExtrinsicObject2_Classification2_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_Classification2_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject2_Classification3 := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification3.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification3.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification3.CreateAttr("classificationScheme", "urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d")
	ExtrinsicObject2_Classification3.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification3.CreateAttr("nodeRepresentation", "3")
	ExtrinsicObject2_Classification3_Slot := ExtrinsicObject2_Classification3.CreateElement("Slot")
	ExtrinsicObject2_Classification3_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject2_Classification3_Slot_ValueList := ExtrinsicObject2_Classification3_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification3_Slot_ValueList_Value := ExtrinsicObject2_Classification3_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification3_Slot_ValueList_Value.SetText("PDF")
	ExtrinsicObject2_Classification3_Name := ExtrinsicObject2_Classification3.CreateElement("Name")
	ExtrinsicObject2_Classification3_Name_LocalizedString := ExtrinsicObject2_Classification3_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_Classification3_Name_LocalizedString.CreateAttr("value", "3")
	ExtrinsicObject2_Classification4 := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification4.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification4.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification4.CreateAttr("classificationScheme", "urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1")
	ExtrinsicObject2_Classification4.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification4.CreateAttr("nodeRepresentation", obj.CDA.BPInfo.OrganizationCode)
	ExtrinsicObject2_Classification4_Slot := ExtrinsicObject2_Classification4.CreateElement("Slot")
	ExtrinsicObject2_Classification4_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject2_Classification4_Slot_ValueList := ExtrinsicObject2_Classification4_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification4_Slot_ValueList_Value := ExtrinsicObject2_Classification4_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification4_Slot_ValueList_Value.SetText("FacilityTypeCodes")
	ExtrinsicObject2_Classification4_Name := ExtrinsicObject2_Classification4.CreateElement("Name")
	ExtrinsicObject2_Classification4_Name_LocalizedString := ExtrinsicObject2_Classification4_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_Classification4_Name_LocalizedString.CreateAttr("value", obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject2_Classification5 := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification5.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification5.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification5.CreateAttr("classificationScheme", "urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead")
	ExtrinsicObject2_Classification5.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification5.CreateAttr("nodeRepresentation", "Radiology")
	ExtrinsicObject2_Classification5_Slot := ExtrinsicObject2_Classification5.CreateElement("Slot")
	ExtrinsicObject2_Classification5_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject2_Classification5_Slot_ValueList := ExtrinsicObject2_Classification5_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification5_Slot_ValueList_Value := ExtrinsicObject2_Classification5_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification5_Slot_ValueList_Value.SetText("PracticeSettingCodes")
	ExtrinsicObject2_Classification5_Name := ExtrinsicObject2_Classification5.CreateElement("Name")
	ExtrinsicObject2_Classification5_Name_LocalizedString := ExtrinsicObject2_Classification5_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_Classification5_Name_LocalizedString.CreateAttr("value", "Radiology")
	ExtrinsicObject2_Classification6 := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification6.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification6.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification6.CreateAttr("classificationScheme", "urn:uuid:f0306f51-975f-434e-a61c-c59651d33983")
	ExtrinsicObject2_Classification6.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification6.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject2_Classification6_Slot := ExtrinsicObject2_Classification6.CreateElement("Slot")
	ExtrinsicObject2_Classification6_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject2_Classification6_Slot_ValueList := ExtrinsicObject2_Classification6_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification6_Slot_ValueList_Value := ExtrinsicObject2_Classification6_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification6_Slot_ValueList_Value.SetText("REPORT")
	ExtrinsicObject2_Classification6_Name := ExtrinsicObject2_Classification6.CreateElement("Name")
	ExtrinsicObject2_Classification6_Name_LocalizedString := ExtrinsicObject2_Classification6_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_Classification6_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject2_Classification7 := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification7.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification7.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification7.CreateAttr("classificationScheme", "urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d")
	ExtrinsicObject2_Classification7.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification7.CreateAttr("nodeRepresentation", "")
	ExtrinsicObject2_Classification7_Slot := ExtrinsicObject2_Classification7.CreateElement("Slot")
	ExtrinsicObject2_Classification7_Slot.CreateAttr("name", "authorPerson")
	ExtrinsicObject2_Classification7_Slot_ValueList := ExtrinsicObject2_Classification7_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification7_Slot_ValueList_Value := ExtrinsicObject2_Classification7_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification7_Slot_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	ExtrinsicObject2_Classification7_Slot2 := ExtrinsicObject2_Classification7.CreateElement("Slot")
	ExtrinsicObject2_Classification7_Slot2.CreateAttr("name", "authorInstitution")
	ExtrinsicObject2_Classification7_Slot2_ValueList := ExtrinsicObject2_Classification7_Slot2.CreateElement("ValueList")
	ExtrinsicObject2_Classification7_Slot2_ValueList_Value := ExtrinsicObject2_Classification7_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification7_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject2_Classification7_Slot3 := ExtrinsicObject2_Classification7.CreateElement("Slot")
	ExtrinsicObject2_Classification7_Slot3.CreateAttr("name", "authorRole")
	ExtrinsicObject2_Classification7_Slot3_ValueList := ExtrinsicObject2_Classification7_Slot3.CreateElement("ValueList")
	ExtrinsicObject2_Classification7_Slot3_ValueList_Value := ExtrinsicObject2_Classification7_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification7_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	ExtrinsicObject2_Classification7_Slot4 := ExtrinsicObject2_Classification7.CreateElement("Slot")
	ExtrinsicObject2_Classification7_Slot4.CreateAttr("name", "authorSpecialty")
	ExtrinsicObject2_Classification7_Slot4_ValueList := ExtrinsicObject2_Classification7_Slot4.CreateElement("ValueList")
	ExtrinsicObject2_Classification7_Slot4_ValueList_Value := ExtrinsicObject2_Classification7_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification7_Slot4_ValueList_Value.SetText("放射学")
	ExtrinsicObject2_Classification8 := ExtrinsicObject2.CreateElement("Classification")
	ExtrinsicObject2_Classification8.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_Classification8.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject2_Classification8.CreateAttr("classificationScheme", "urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d")
	ExtrinsicObject2_Classification8.CreateAttr("classifiedObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_Classification8.CreateAttr("nodeRepresentation", "")
	ExtrinsicObject2_Classification8_Slot := ExtrinsicObject2_Classification8.CreateElement("Slot")
	ExtrinsicObject2_Classification8_Slot.CreateAttr("name", "authorPerson")
	ExtrinsicObject2_Classification8_Slot_ValueList := ExtrinsicObject2_Classification8_Slot.CreateElement("ValueList")
	ExtrinsicObject2_Classification8_Slot_ValueList_Value := ExtrinsicObject2_Classification8_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification8_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	ExtrinsicObject2_Classification8_Slot2 := ExtrinsicObject2_Classification7.CreateElement("Slot")
	ExtrinsicObject2_Classification8_Slot2.CreateAttr("name", "authorInstitution")
	ExtrinsicObject2_Classification8_Slot2_ValueList := ExtrinsicObject2_Classification8_Slot2.CreateElement("ValueList")
	ExtrinsicObject2_Classification8_Slot2_ValueList_Value := ExtrinsicObject2_Classification8_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification8_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject2_Classification8_Slot3 := ExtrinsicObject2_Classification8.CreateElement("Slot")
	ExtrinsicObject2_Classification8_Slot3.CreateAttr("name", "authorRole")
	ExtrinsicObject2_Classification8_Slot3_ValueList := ExtrinsicObject2_Classification8_Slot3.CreateElement("ValueList")
	ExtrinsicObject2_Classification8_Slot3_ValueList_Value := ExtrinsicObject2_Classification8_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification8_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	ExtrinsicObject2_Classification8_Slot4 := ExtrinsicObject2_Classification8.CreateElement("Slot")
	ExtrinsicObject2_Classification8_Slot4.CreateAttr("name", "authorSpecialty")
	ExtrinsicObject2_Classification8_Slot4_ValueList := ExtrinsicObject2_Classification8_Slot4.CreateElement("ValueList")
	ExtrinsicObject2_Classification8_Slot4_ValueList_Value := ExtrinsicObject2_Classification8_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject2_Classification8_Slot4_ValueList_Value.SetText("放射学")
	ExtrinsicObject2_ExternalIdentifier := ExtrinsicObject2.CreateElement("ExternalIdentifier")
	ExtrinsicObject2_ExternalIdentifier.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_ExternalIdentifier.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	ExtrinsicObject2_ExternalIdentifier.CreateAttr("registryObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_ExternalIdentifier.CreateAttr("identificationScheme", "urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427")
	ExtrinsicObject2_ExternalIdentifier.CreateAttr("value", obj.CDA.BPInfo.PatientID+"^^^&"+obj.CDA.BPInfo.InteractionId+"&ISO")
	ExtrinsicObject2_ExternalIdentifier_Name := ExtrinsicObject2_ExternalIdentifier.CreateElement("Name")
	ExtrinsicObject2_ExternalIdentifier_Name_LocalizedString := ExtrinsicObject2_ExternalIdentifier_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_ExternalIdentifier_Name_LocalizedString.CreateAttr("value", "XDSDocumentEntry.patientId")
	ExtrinsicObject2_ExternalIdentifier1 := ExtrinsicObject2.CreateElement("ExternalIdentifier")
	ExtrinsicObject2_ExternalIdentifier1.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject2_ExternalIdentifier1.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	ExtrinsicObject2_ExternalIdentifier1.CreateAttr("registryObject", "urn:uuid:"+obj.PDFFileID)
	ExtrinsicObject2_ExternalIdentifier1.CreateAttr("identificationScheme", "urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab")
	ExtrinsicObject2_ExternalIdentifier1.CreateAttr("value", obj.CDA.BPInfo.InteractionId+"."+obj.CDA.BPInfo.OrganizationCode+"."+uuid.NewV4().String())
	ExtrinsicObject2_ExternalIdentifier1_Name := ExtrinsicObject2_ExternalIdentifier1.CreateElement("Name")
	ExtrinsicObject2_ExternalIdentifier1_Name_LocalizedString := ExtrinsicObject2_ExternalIdentifier1_Name.CreateElement("LocalizedString")
	ExtrinsicObject2_ExternalIdentifier1_Name_LocalizedString.CreateAttr("value", "XDSDocumentEntry.uniqueId")

	ExtrinsicObject3 := RegistryObjectList.CreateElement("ExtrinsicObject")
	ExtrinsicObject3.CreateAttr("id", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3.CreateAttr("objectType", "urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1")
	ExtrinsicObject3.CreateAttr("mimeType", "application/dicom")
	ExtrinsicObject3_Slot := ExtrinsicObject3.CreateElement("Slot")
	ExtrinsicObject3_Slot.CreateAttr("name", "creationTime")
	ExtrinsicObject3_Slot_ValueList := ExtrinsicObject3_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Slot_ValueList_Value := ExtrinsicObject3_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditTime)
	ExtrinsicObject3_Slot2 := ExtrinsicObject3.CreateElement("Slot")
	ExtrinsicObject3_Slot2.CreateAttr("name", "languageCode")
	ExtrinsicObject3_Slot2_ValueList := ExtrinsicObject3_Slot2.CreateElement("ValueList")
	ExtrinsicObject3_Slot2_ValueList_Value := ExtrinsicObject3_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot2_ValueList_Value.SetText("zh-cn")
	ExtrinsicObject3_Slot3 := ExtrinsicObject3.CreateElement("Slot")
	ExtrinsicObject3_Slot3.CreateAttr("name", "serviceStartTime")
	ExtrinsicObject3_Slot3_ValueList := ExtrinsicObject3_Slot3.CreateElement("ValueList")
	ExtrinsicObject3_Slot3_ValueList_Value := ExtrinsicObject3_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.ReportTime)
	ExtrinsicObject3_Slot4 := ExtrinsicObject3.CreateElement("Slot")
	ExtrinsicObject3_Slot4.CreateAttr("name", "serviceStopTime")
	ExtrinsicObject3_Slot4_ValueList := ExtrinsicObject3_Slot4.CreateElement("ValueList")
	ExtrinsicObject3_Slot4_ValueList_Value := ExtrinsicObject3_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot4_ValueList_Value.SetText(obj.CDA.RInfo.ReportTime)
	ExtrinsicObject3_Slot5 := ExtrinsicObject3.CreateElement("Slot")
	ExtrinsicObject3_Slot5.CreateAttr("name", "sourcePatientId")
	ExtrinsicObject3_Slot5_ValueList := ExtrinsicObject3_Slot5.CreateElement("ValueList")
	ExtrinsicObject3_Slot5_ValueList_Value := ExtrinsicObject3_Slot5_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot5_ValueList_Value.SetText(obj.CDA.BPInfo.PatientID + "^^^&" + obj.CDA.BPInfo.InteractionId + "&ISO")
	ExtrinsicObject3_Slot6 := ExtrinsicObject3.CreateElement("Slot")
	ExtrinsicObject3_Slot6.CreateAttr("name", "sourcePatientInfo")
	ExtrinsicObject3_Slot6_ValueList := ExtrinsicObject3_Slot6.CreateElement("ValueList")
	ExtrinsicObject3_Slot6_ValueList_Value := ExtrinsicObject3_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot6_ValueList_Value.SetText("PID-3|" + obj.CDA.BPInfo.PatientID)
	ExtrinsicObject3_Slot6_ValueList_Value2 := ExtrinsicObject3_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot6_ValueList_Value2.SetText("PID-5|" + obj.CDA.BPInfo.Name)
	ExtrinsicObject3_Slot6_ValueList_Value3 := ExtrinsicObject3_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot6_ValueList_Value3.SetText("PID-7|" + obj.CDA.BPInfo.BirthTime)
	ExtrinsicObject3_Slot6_ValueList_Value4 := ExtrinsicObject3_Slot6_ValueList.CreateElement("Value")
	ExtrinsicObject3_Slot6_ValueList_Value4.SetText("PID-8|" + obj.CDA.BPInfo.Gender)
	ExtrinsicObject3_Name := ExtrinsicObject3.CreateElement("Name")
	ExtrinsicObject3_Name_LocalizedString := ExtrinsicObject3_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_Name_LocalizedString.CreateAttr("value", obj.CDA.RInfo.CheckItems)
	ExtrinsicObject3_Description := ExtrinsicObject3.CreateElement("Description")
	ExtrinsicObject3_Description_LocalizedString := ExtrinsicObject3_Description.CreateElement("LocalizedString")
	ExtrinsicObject3_Description_LocalizedString.CreateAttr("value", obj.CDA.RInfo.AccessionNumber+"^"+obj.CDA.RInfo.StudyInstanceUid)
	ExtrinsicObject3_Classification := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification.CreateAttr("classificationScheme", "urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a")
	ExtrinsicObject3_Classification.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification.CreateAttr("nodeRepresentation", "2")
	ExtrinsicObject3_Classification_Slot := ExtrinsicObject3_Classification.CreateElement("Slot")
	ExtrinsicObject3_Classification_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject3_Classification_Slot_ValueList := ExtrinsicObject3_Classification_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification_Slot_ValueList_Value := ExtrinsicObject3_Classification_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification_Slot_ValueList_Value.SetText(obj.CDA.RInfo.ModalityName)
	ExtrinsicObject3_Classification_Name := ExtrinsicObject3_Classification.CreateElement("Name")
	ExtrinsicObject3_Classification_Name_LocalizedString := ExtrinsicObject3_Classification_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_Classification_Name_LocalizedString.CreateAttr("value", "REPORT-IMAGE")
	ExtrinsicObject3_Classification2 := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification2.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification2.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification2.CreateAttr("classificationScheme", "urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f")
	ExtrinsicObject3_Classification2.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification2.CreateAttr("nodeRepresentation", "1")
	ExtrinsicObject3_Classification2_Slot := ExtrinsicObject3_Classification2.CreateElement("Slot")
	ExtrinsicObject3_Classification2_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject3_Classification2_Slot_ValueList := ExtrinsicObject3_Classification2_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification2_Slot_ValueList_Value := ExtrinsicObject3_Classification2_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification2_Slot_ValueList_Value.SetText("N")
	ExtrinsicObject3_Classification2_Name := ExtrinsicObject3_Classification2.CreateElement("Name")
	ExtrinsicObject3_Classification2_Name_LocalizedString := ExtrinsicObject3_Classification2_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_Classification2_Name_LocalizedString.CreateAttr("value", "1")
	ExtrinsicObject3_Classification3 := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification3.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification3.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification3.CreateAttr("classificationScheme", "urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d")
	ExtrinsicObject3_Classification3.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification3.CreateAttr("nodeRepresentation", "6")
	ExtrinsicObject3_Classification3_Slot := ExtrinsicObject3_Classification3.CreateElement("Slot")
	ExtrinsicObject3_Classification3_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject3_Classification3_Slot_ValueList := ExtrinsicObject3_Classification3_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification3_Slot_ValueList_Value := ExtrinsicObject3_Classification3_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification3_Slot_ValueList_Value.SetText("DICOM")
	ExtrinsicObject3_Classification3_Name := ExtrinsicObject3_Classification3.CreateElement("Name")
	ExtrinsicObject3_Classification3_Name_LocalizedString := ExtrinsicObject3_Classification3_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_Classification3_Name_LocalizedString.CreateAttr("value", "6")
	ExtrinsicObject3_Classification4 := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification4.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification4.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification4.CreateAttr("classificationScheme", "urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1")
	ExtrinsicObject3_Classification4.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification4.CreateAttr("nodeRepresentation", obj.CDA.BPInfo.OrganizationCode)
	ExtrinsicObject3_Classification4_Slot := ExtrinsicObject3_Classification4.CreateElement("Slot")
	ExtrinsicObject3_Classification4_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject3_Classification4_Slot_ValueList := ExtrinsicObject3_Classification4_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification4_Slot_ValueList_Value := ExtrinsicObject3_Classification4_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification4_Slot_ValueList_Value.SetText("FacilityTypeCodes")
	ExtrinsicObject3_Classification4_Name := ExtrinsicObject3_Classification4.CreateElement("Name")
	ExtrinsicObject3_Classification4_Name_LocalizedString := ExtrinsicObject3_Classification4_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_Classification4_Name_LocalizedString.CreateAttr("value", obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject3_Classification5 := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification5.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification5.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification5.CreateAttr("classificationScheme", "urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead")
	ExtrinsicObject3_Classification5.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification5.CreateAttr("nodeRepresentation", "Radiology")
	ExtrinsicObject3_Classification5_Slot := ExtrinsicObject3_Classification5.CreateElement("Slot")
	ExtrinsicObject3_Classification5_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject3_Classification5_Slot_ValueList := ExtrinsicObject3_Classification5_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification5_Slot_ValueList_Value := ExtrinsicObject3_Classification5_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification5_Slot_ValueList_Value.SetText("PracticeSettingCodes")
	ExtrinsicObject3_Classification5_Name := ExtrinsicObject3_Classification5.CreateElement("Name")
	ExtrinsicObject3_Classification5_Name_LocalizedString := ExtrinsicObject3_Classification5_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_Classification5_Name_LocalizedString.CreateAttr("value", "Radiology")
	ExtrinsicObject3_Classification6 := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification6.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification6.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification6.CreateAttr("classificationScheme", "urn:uuid:f0306f51-975f-434e-a61c-c59651d33983")
	ExtrinsicObject3_Classification6.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification6.CreateAttr("nodeRepresentation", "2")
	ExtrinsicObject3_Classification6_Slot := ExtrinsicObject3_Classification6.CreateElement("Slot")
	ExtrinsicObject3_Classification6_Slot.CreateAttr("name", "codingScheme")
	ExtrinsicObject3_Classification6_Slot_ValueList := ExtrinsicObject3_Classification6_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification6_Slot_ValueList_Value := ExtrinsicObject3_Classification6_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification6_Slot_ValueList_Value.SetText("ALL_IMAGES")
	ExtrinsicObject3_Classification6_Name := ExtrinsicObject3_Classification6.CreateElement("Name")
	ExtrinsicObject3_Classification6_Name_LocalizedString := ExtrinsicObject3_Classification6_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_Classification6_Name_LocalizedString.CreateAttr("value", "2")
	ExtrinsicObject3_Classification7 := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification7.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification7.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification7.CreateAttr("classificationScheme", "urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d")
	ExtrinsicObject3_Classification7.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification7.CreateAttr("nodeRepresentation", "")
	ExtrinsicObject3_Classification7_Slot := ExtrinsicObject3_Classification7.CreateElement("Slot")
	ExtrinsicObject3_Classification7_Slot.CreateAttr("name", "authorPerson")
	ExtrinsicObject3_Classification7_Slot_ValueList := ExtrinsicObject3_Classification7_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification7_Slot_ValueList_Value := ExtrinsicObject3_Classification7_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification7_Slot_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	ExtrinsicObject3_Classification7_Slot2 := ExtrinsicObject3_Classification7.CreateElement("Slot")
	ExtrinsicObject3_Classification7_Slot2.CreateAttr("name", "authorInstitution")
	ExtrinsicObject3_Classification7_Slot2_ValueList := ExtrinsicObject3_Classification7_Slot2.CreateElement("ValueList")
	ExtrinsicObject3_Classification7_Slot2_ValueList_Value := ExtrinsicObject3_Classification7_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification7_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject3_Classification7_Slot3 := ExtrinsicObject3_Classification7.CreateElement("Slot")
	ExtrinsicObject3_Classification7_Slot3.CreateAttr("name", "authorRole")
	ExtrinsicObject3_Classification7_Slot3_ValueList := ExtrinsicObject3_Classification7_Slot3.CreateElement("ValueList")
	ExtrinsicObject3_Classification7_Slot3_ValueList_Value := ExtrinsicObject3_Classification7_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification7_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.ReportDoctor)
	ExtrinsicObject3_Classification7_Slot4 := ExtrinsicObject3_Classification7.CreateElement("Slot")
	ExtrinsicObject3_Classification7_Slot4.CreateAttr("name", "authorSpecialty")
	ExtrinsicObject3_Classification7_Slot4_ValueList := ExtrinsicObject3_Classification7_Slot4.CreateElement("ValueList")
	ExtrinsicObject3_Classification7_Slot4_ValueList_Value := ExtrinsicObject3_Classification7_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification7_Slot4_ValueList_Value.SetText("放射学")
	ExtrinsicObject3_Classification8 := ExtrinsicObject3.CreateElement("Classification")
	ExtrinsicObject3_Classification8.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_Classification8.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification")
	ExtrinsicObject3_Classification8.CreateAttr("classificationScheme", "urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d")
	ExtrinsicObject3_Classification8.CreateAttr("classifiedObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_Classification8.CreateAttr("nodeRepresentation", "")
	ExtrinsicObject3_Classification8_Slot := ExtrinsicObject3_Classification8.CreateElement("Slot")
	ExtrinsicObject3_Classification8_Slot.CreateAttr("name", "authorPerson")
	ExtrinsicObject3_Classification8_Slot_ValueList := ExtrinsicObject3_Classification8_Slot.CreateElement("ValueList")
	ExtrinsicObject3_Classification8_Slot_ValueList_Value := ExtrinsicObject3_Classification8_Slot_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification8_Slot_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	ExtrinsicObject3_Classification8_Slot2 := ExtrinsicObject3_Classification7.CreateElement("Slot")
	ExtrinsicObject3_Classification8_Slot2.CreateAttr("name", "authorInstitution")
	ExtrinsicObject3_Classification8_Slot2_ValueList := ExtrinsicObject3_Classification8_Slot2.CreateElement("ValueList")
	ExtrinsicObject3_Classification8_Slot2_ValueList_Value := ExtrinsicObject3_Classification8_Slot2_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification8_Slot2_ValueList_Value.SetText(obj.CDA.BPInfo.OrganizationName)
	ExtrinsicObject3_Classification8_Slot3 := ExtrinsicObject3_Classification8.CreateElement("Slot")
	ExtrinsicObject3_Classification8_Slot3.CreateAttr("name", "authorRole")
	ExtrinsicObject3_Classification8_Slot3_ValueList := ExtrinsicObject3_Classification8_Slot3.CreateElement("ValueList")
	ExtrinsicObject3_Classification8_Slot3_ValueList_Value := ExtrinsicObject3_Classification8_Slot3_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification8_Slot3_ValueList_Value.SetText(obj.CDA.RInfo.AuditDoctor)
	ExtrinsicObject3_Classification8_Slot4 := ExtrinsicObject3_Classification8.CreateElement("Slot")
	ExtrinsicObject3_Classification8_Slot4.CreateAttr("name", "authorSpecialty")
	ExtrinsicObject3_Classification8_Slot4_ValueList := ExtrinsicObject3_Classification8_Slot4.CreateElement("ValueList")
	ExtrinsicObject3_Classification8_Slot4_ValueList_Value := ExtrinsicObject3_Classification8_Slot4_ValueList.CreateElement("Value")
	ExtrinsicObject3_Classification8_Slot4_ValueList_Value.SetText("放射学")
	ExtrinsicObject3_ExternalIdentifier := ExtrinsicObject3.CreateElement("ExternalIdentifier")
	ExtrinsicObject3_ExternalIdentifier.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_ExternalIdentifier.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	ExtrinsicObject3_ExternalIdentifier.CreateAttr("registryObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_ExternalIdentifier.CreateAttr("identificationScheme", "urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427")
	ExtrinsicObject3_ExternalIdentifier.CreateAttr("value", obj.CDA.BPInfo.PatientID+"^^^&"+obj.CDA.BPInfo.InteractionId+"&ISO")
	ExtrinsicObject3_ExternalIdentifier_Name := ExtrinsicObject3_ExternalIdentifier.CreateElement("Name")
	ExtrinsicObject3_ExternalIdentifier_Name_LocalizedString := ExtrinsicObject3_ExternalIdentifier_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_ExternalIdentifier_Name_LocalizedString.CreateAttr("value", "XDSDocumentEntry.patientId")
	ExtrinsicObject3_ExternalIdentifier1 := ExtrinsicObject3.CreateElement("ExternalIdentifier")
	ExtrinsicObject3_ExternalIdentifier1.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	ExtrinsicObject3_ExternalIdentifier1.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier")
	ExtrinsicObject3_ExternalIdentifier1.CreateAttr("registryObject", "urn:uuid:"+obj.KOSFileID)
	ExtrinsicObject3_ExternalIdentifier1.CreateAttr("identificationScheme", "urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab")
	ExtrinsicObject3_ExternalIdentifier1.CreateAttr("value", obj.CDA.BPInfo.InteractionId+"."+obj.CDA.BPInfo.OrganizationCode+"."+uuid.NewV4().String())
	ExtrinsicObject3_ExternalIdentifier1_Name := ExtrinsicObject3_ExternalIdentifier1.CreateElement("Name")
	ExtrinsicObject3_ExternalIdentifier1_Name_LocalizedString := ExtrinsicObject3_ExternalIdentifier1_Name.CreateElement("LocalizedString")
	ExtrinsicObject3_ExternalIdentifier1_Name_LocalizedString.CreateAttr("value", "XDSDocumentEntry.uniqueId")
	Association := RegistryObjectList.CreateElement("Association")
	Association.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	Association.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Association")
	Association.CreateAttr("associationType", "urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember")
	Association.CreateAttr("sourceObject", "urn:uuid:"+obj.Object.Uid_Enc)
	Association.CreateAttr("targetObject", "urn:uuid:"+obj.CDAFileID)
	Association_Slot := Association.CreateElement("Slot")
	Association_Slot.CreateAttr("name", "SubmissionSetStatus")
	Association_Slot_ValueList := Association_Slot.CreateElement("ValueList")
	Association_Slot_ValueList_Value := Association_Slot_ValueList.CreateElement("Value")
	Association_Slot_ValueList_Value.SetText("Original")
	Association2 := RegistryObjectList.CreateElement("Association")
	Association2.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	Association2.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Association")
	Association2.CreateAttr("associationType", "urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember")
	Association2.CreateAttr("sourceObject", "urn:uuid:"+obj.Object.Uid_Enc)
	Association2.CreateAttr("targetObject", "urn:uuid:"+obj.PDFFileID)
	Association2_Slot := Association2.CreateElement("Slot")
	Association2_Slot.CreateAttr("name", "SubmissionSetStatus")
	Association2_Slot_ValueList := Association2_Slot.CreateElement("ValueList")
	Association2_Slot_ValueList_Value := Association2_Slot_ValueList.CreateElement("Value")
	Association2_Slot_ValueList_Value.SetText("Original")
	Association3 := RegistryObjectList.CreateElement("Association")
	Association3.CreateAttr("id", "urn:uuid:"+uuid.NewV4().String())
	Association3.CreateAttr("objectType", "urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Association")
	Association3.CreateAttr("associationType", "urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember")
	Association3.CreateAttr("sourceObject", "urn:uuid:"+obj.Object.Uid_Enc)
	Association3.CreateAttr("targetObject", "urn:uuid:"+obj.KOSFileID)
	Association3_Slot := Association3.CreateElement("Slot")
	Association3_Slot.CreateAttr("name", "SubmissionSetStatus")
	Association3_Slot_ValueList := Association3_Slot.CreateElement("ValueList")
	Association3_Slot_ValueList_Value := Association3_Slot_ValueList.CreateElement("Value")
	Association3_Slot_ValueList_Value.SetText("Original")
	Document1 := ProvideAndRegisterDocumentSetRequest.CreateElement("Document")
	Document1.CreateAttr("id", "urn:uuid:"+obj.CDAFileID)
	Document1.SetText(obj.CDAData)
	Document2 := ProvideAndRegisterDocumentSetRequest.CreateElement("Document")
	Document2.CreateAttr("id", "urn:uuid:"+obj.PDFFileID)
	Document2.SetText(obj.PDFData)
	Document3 := ProvideAndRegisterDocumentSetRequest.CreateElement("Document")
	Document3.CreateAttr("id", "urn:uuid:"+obj.KOSFileID)
	Document3.SetText(obj.KOSData)

	// xml 缩进q
	doc.Indent(4)
	//doc.WriteTo(os.Stdout)
	// doc.WriteToFile(xmlfile)
	// doc.WriteToFile("./storage/xml/CDAKOS.xml")
	return doc.WriteToString()
}
